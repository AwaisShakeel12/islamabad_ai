;/*FB_PKG_DELIM*/

__d("PolarisClipsItemModal.react",["IGRouter_DO_NOT_USE.react","PolarisClipsHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useRef;function a(a){var b=a.analyticsContext,e=a.clips,f=a.history,g=a.onClose,h=a.onOpen;a=a.postId;f=j(f.location.pathname);var k=d("PolarisClipsHelpers").getClipItemFromPostID(e,a);if(!k)return null;e=e.map(function(a){return c("nullthrows")((a=a.media)==null?void 0:a.pk)});return i.jsx(c("PolarisPostModal.react"),{analyticsContext:b,combinedPostIds:e,dimensions:d("PolarisClipsHelpers").getClipDimensionsFromItemDict(k),mediaLinkBuilder:d("PolarisLinkBuilder").buildClipsMediaLink,modalEntryPath:f.current,onClose:g,onOpen:h,postCode:c("nullthrows")((e=k.media)==null?void 0:e.code),postId:a,children:i.jsx(c("PolarisPost.react"),{analyticsContext:b+"Modal",autoplay:!0,id:a,isVisible:!0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";b=d("IGRouter_DO_NOT_USE.react").withIGRouter(a);g["default"]=b}),98);
__d("PolarisClipsTabHelpers",["IGDSThemeConstantsHelpers","PolarisConfig","PolarisDsaQEHelpers","PolarisNavigationHelpers","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=12,i=60,j=d("IGDSThemeConstantsHelpers").getNumericValue("nav-narrow-screen-min"),k=d("IGDSThemeConstantsHelpers").getNumericValue("revamp-nav-bottom-toolbar-height"),l=60,m=32;function n(){var a;a=(a=(a=document.documentElement)==null?void 0:a.clientWidth)!=null?a:0;return a-d("PolarisNavigationHelpers").getNavBarDesktopWidth()-2*m-i-h}function o(a,b){var e,f;b===void 0&&(b=!1);e=(e=(e=document.documentElement)==null?void 0:e.clientHeight)!=null?e:0;f=(f=(f=document.documentElement)==null?void 0:f.clientWidth)!=null?f:0;var g=n();g=g*(16/9);f=f<j?k+(b?l:0):!d("PolarisConfig").isLoggedIn()&&c("gkx")("4555")?l:0;e=e*.9-f;a===!0&&!b&&(e-=78);g>e&&(g=e);return g}var p=1200;function a(a){if(a==null){var b=o(d("PolarisDsaQEHelpers").hasTabbedReelsHeader());return Math.min(b,p)}b=a.getBoundingClientRect().top;a=32;return Math.min(b-a,p)}var q={container:{display:"x78zum5",maxHeight:"xedcshv",$$css:!0},ufi:{justifyContent:"x13a6bvl",marginStart:"x16n37ib",width:"x1247r65",$$css:!0}};function b(){return{container:q.container,ufi:q.ufi}}e=1500;g.getReelMediaContainerHeight=o;g.getMaxPopoverHeight=a;g.getClipsContainerStyles=b;g.WINDOW_RESIZE_THROTTLE=e}),98);
__d("PolarisSponsoredPersistentCTAThumbnail.react",["fbt","PolarisThumbnail.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.thumbnailImageSrc;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__ePItbjSnMcH__JHASH__"),b[0]=d):d=b[0];b[1]!==a?(d=k.jsx(c("PolarisThumbnail.react"),{alt:d,dimension:32,src:a}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("useThrottled",["cr:6101"],(function(a,b,c,d,e,f,g){"use strict";f.exports=b("cr:6101")}),34);
__d("PolarisDesktopSponsoredPersistentCTA.react",["CometErrorBoundary.react","InstagramODS","InstagramWebAdEventsAuditFalcoEvent","PolarisClickEventLoggerProvider.react","PolarisClipsTabHelpers","PolarisNavigationHelpers","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisSponsoredPersistentCTAThumbnail.react","PolarisTrackingCodeProvider.react","PolarisTrackingNodeProvider.react","getPolarisPostIdFromNativeId","polarisAdsSelectors.react","polarisPostSelectors","react","usePolarisSelector","usePolarisSponsoredPostCTAFooterDominantColor","useThrottled"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useLayoutEffect,l=b.useState,m=b.c;function n(a){var b=m(29),e=a.ctaAdditionalAnimation,f=a.ctaLinkText,g=a.domColor,h=a.entryPoint,n=a.externalURL,o=a.mediaId,p=a.mpk,q=a.post,r=a.socialContextType,s=a.thumbnailImageSrc,t=a.trackingToken;a=l(0);var u=a[0],v=a[1];b[0]!==o||b[1]!==q?(a={isMediaRendered:!0,mediaId:o,post:q},b[0]=o,b[1]=q,b[2]=a):a=b[2];o=c("usePolarisSponsoredPostCTAFooterDominantColor")(a);q=o.ctaFooterViewpointRef;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){v(d("PolarisNavigationHelpers").getNavBarDesktopWidth())},b[3]=a):a=b[3];var w=c("useThrottled")(a,d("PolarisClipsTabHelpers").WINDOW_RESIZE_THROTTLE);b[4]!==w?(o=function(){w();window.addEventListener("resize",w);return function(){window.removeEventListener("resize",w)}},a=[w],b[4]=w,b[5]=o,b[6]=a):(o=b[5],a=b[6]);k(o,a);b[7]!==t||b[8]!==r||b[9]!==h?(o=function(){c("InstagramODS").incr("web.ads.feed.link_click"),c("InstagramWebAdEventsAuditFalcoEvent").log(function(){return{client_token:t,event:"persistent_cta_click",social_context_type:r}}),h!==null&&h==="story"?c("InstagramODS").incr("web.ads.story.desktop_persistent_link_click"):c("InstagramODS").incr("web.ads.feed.persistent_link_click")},b[7]=t,b[8]=r,b[9]=h,b[10]=o):o=b[10];var x=o;b[11]!==h?(a=function(){h!==null&&h==="story"?c("InstagramODS").incr("web.ads.story.desktop_persistent_cta_rendered"):c("InstagramODS").incr("web.ads.feed.persistent_cta_rendered")},o=[h],b[11]=h,b[12]=a,b[13]=o):(a=b[12],o=b[13]);j(a,o);b[14]!==u||b[15]!==e||b[16]!==g||b[17]!==n||b[18]!==s||b[19]!==x||b[20]!==f?(a=function(a){return i.jsx("div",{className:"xjnlgov xtzzx4i xixxii4",ref:a,style:{transform:"translateX(calc(-50% + "+u/2+"px))"},children:i.jsx(c("PolarisPostFooterCTA.react"),{ctaAdditionalAnimation:e,ctaDominantColor:g,disableAnimation:!0,externalURL:n,forceBottomBorder:!1,icon:i.jsx(c("PolarisSponsoredPersistentCTAThumbnail.react"),{thumbnailImageSrc:s}),isActive:!0,isForAd:!0,isForPersistentCta:!0,onClick:x,showChevron:!0,showRoundedBorder:!0,text:f})})},b[14]=u,b[15]=e,b[16]=g,b[17]=n,b[18]=s,b[19]=x,b[20]=f,b[21]=a):a=b[21];b[22]!==q||b[23]!==a?(o=i.jsx(c("PolarisClickEventLoggerProvider.react"),{children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:q,trackingNode:86,children:a})}),b[22]=q,b[23]=a,b[24]=o):o=b[24];b[25]!==p||b[26]!==t||b[27]!==o?(q=i.jsx(c("PolarisTrackingCodeProvider.react"),{isSponsored:!0,m_pk:p,trackingToken:t,children:o}),b[25]=p,b[26]=t,b[27]=o,b[28]=q):q=b[28];return q}function a(a){var b=m(25),e=a.entryPoint,f=a.mpk,g;b[0]!==f?(g=c("getPolarisPostIdFromNativeId")(f),b[0]=f,b[1]=g):g=b[1];var h=g;f=d("polarisAdsSelectors.react").useFeedAdInfo(h,p);g=d("polarisAdsSelectors.react").useStoryAdInfo(h,o);g=e!==null&&e==="story"?g:f;b[2]!==h?(f=function(a){return d("polarisPostSelectors").getPostById(a,h)},b[2]=h,b[3]=f):f=b[3];f=c("usePolarisSelector")(f);var j=f.isSidecar,k=f.src,l=f.thumbnailSrc;if(b[4]!==j||b[5]!==f){var q;q=j===!0?(q=d("PolarisPostUtils").getCurrentSidecarItemFromPost(f,0))==null?void 0:q.id:f.id;b[4]=j;b[5]=f;b[6]=q}else q=b[6];j=q;l=(q=l)!=null?q:k;if(j==null||l==null)return null;if(b[7]!==(g==null?void 0:g.ctaItems)||b[8]!==j){q=g==null?void 0:(q=g.ctaItems)==null?void 0:(k=q.get(j))==null?void 0:k.ctaLinkUrl;b[7]=g==null?void 0:g.ctaItems;b[8]=j;b[9]=q}else q=b[9];k=q;if(b[10]!==(g==null?void 0:g.ctaItems)||b[11]!==j){q=g==null?void 0:(q=g.ctaItems)==null?void 0:(q=q.get(j))==null?void 0:q.ctaLinkText;b[10]=g==null?void 0:g.ctaItems;b[11]=j;b[12]=q}else q=b[12];q=q;if(b[13]!==(g==null?void 0:g.ctaItems)||b[14]!==j){var r;r=g==null?void 0:(r=g.ctaItems)==null?void 0:(r=r.get(j))==null?void 0:r.ctaDominantColor;b[13]=g==null?void 0:g.ctaItems;b[14]=j;b[15]=r}else r=b[15];g=r;if(k==null||q==null)return null;b[16]!==a||b[17]!==q||b[18]!==g||b[19]!==e||b[20]!==k||b[21]!==j||b[22]!==f||b[23]!==l?(r=i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(n,babelHelpers["extends"]({},a,{ctaLinkText:q,domColor:g,entryPoint:e,externalURL:k,mediaId:j,post:f,thumbnailImageSrc:l}))}),b[16]=a,b[17]=q,b[18]=g,b[19]=e,b[20]=k,b[21]=j,b[22]=f,b[23]=l,b[24]=r):r=b[24];return r}function o(a){return a}function p(a){return a}g["default"]=a}),98);
__d("PolarisProfileTabTaggedPhotosConstants",[],(function(a,b,c,d,e,f){"use strict";a="tagged";f.TAGGED_TAB_ID=a}),66);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostModalHelpers","polarisPostSelectors","react","usePolarisSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b,e=i(6),f=!1,g=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(a.analyticsContext)==="profilePageModal";b=((b=a.modalEntryPath)==null?void 0:b.endsWith("/"+d("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0;g=g&&!b;var h;e[0]!==a.postId?(h=function(b){return d("polarisPostSelectors").getPostOrNullById(b,a.postId)},e[0]=a.postId,e[1]=h):h=e[1];h=c("usePolarisSelector")(h);(h==null||b&&h.isVideo===!0)&&(f=!0);e[2]!==a||e[3]!==f||e[4]!==g?(b=j.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:f,skipMediaInfo:g})),e[2]=a,e[3]=f,e[4]=g,e[5]=b):b=e[5];return b}g["default"]=a}),98);
__d("PolarisMediaBrowserPostModal.react",["invariant","PolarisInstantPostModal.react","PolarisIsLoggedInDesktop","PolarisPost.react","PolarisPostVariants","PolarisReactRedux.react","PolarisRoutes","isStringNullOrEmpty","nullthrows","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c;function a(a){var b=l(28),e=a.analyticsContext,f=a.combinedPosts,g=a.mediaLinkBuilder,i=a.modalEntryPath,o=a.onClose,p=a.onOpen,q=a.postId,r=d("PolarisReactRedux.react").useSelector(n);b[0]!==f?(a=f.map(m),b[0]=f,b[1]=a):a=b[1];f=a;b[2]!==q?(a=function(a){return d("polarisPostSelectors").getPostOrNullById(a,q)},b[2]=q,b[3]=a):a=b[3];var s=d("PolarisReactRedux.react").useSelector(a),t;b[4]!==s||b[5]!==r||b[6]!==q||b[7]!==o?(a=function(){s==null&&(r.includes(q)||h(0,51476),o())},t=[r,o,s,q],b[4]=s,b[5]=r,b[6]=q,b[7]=o,b[8]=a,b[9]=t):(a=b[8],t=b[9]);k(a,t);if(s==null)return null;a=s.dimensions;t=c("isStringNullOrEmpty")(i)?d("PolarisRoutes").FEED_PATH:i;b[10]!==s.code?(i=c("nullthrows")(s.code),b[10]=s.code,b[11]=i):i=b[11];var u=e+"Modal",v;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(v=d("PolarisIsLoggedInDesktop").isLoggedInDesktop(),b[12]=v):v=b[12];b[13]!==u||b[14]!==q||b[15]!==s.code?(v=j.jsx(c("PolarisPost.react"),{analyticsContext:u,autoplay:v,id:q,isVisible:!0,shortcode:s.code,testid:void 0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),b[13]=u,b[14]=q,b[15]=s.code,b[16]=v):v=b[16];b[17]!==e||b[18]!==f||b[19]!==s.dimensions||b[20]!==g||b[21]!==t||b[22]!==o||b[23]!==p||b[24]!==i||b[25]!==q||b[26]!==v?(u=j.jsx(c("PolarisInstantPostModal.react"),{analyticsContext:e,combinedPostIds:f,dimensions:a,mediaLinkBuilder:g,modalEntryPath:t,onClose:o,onOpen:p,postCode:i,postId:q,children:v}),b[17]=e,b[18]=f,b[19]=s.dimensions,b[20]=g,b[21]=t,b[22]=o,b[23]=p,b[24]=i,b[25]=q,b[26]=v,b[27]=u):u=b[27];return u}function m(a){return a.id}function n(a){return d("polarisPostSelectors").getDeletedIds(a)}g["default"]=a}),98);
__d("PolarisMobileSponsoredPersistentCTA.react",["CometErrorBoundary.react","InstagramODS","InstagramWebAdEventsAuditFalcoEvent","PolarisClickEventLoggerProvider.react","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisSponsoredPersistentCTAThumbnail.react","PolarisTrackingCodeProvider.react","PolarisTrackingNodeProvider.react","getPolarisPostIdFromNativeId","polarisAdsSelectors.react","polarisPostSelectors","react","usePolarisSelector","usePolarisSponsoredPostCTAFooterDominantColor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l=60;function m(a){var b=k(27),d=a.bottomOffset,e=a.ctaAdditionalAnimation,f=a.ctaLinkText,g=a.domColor,h=a.entryPoint,m=a.externalURL,n=a.mediaId,o=a.mpk,p=a.post,q=a.socialContextType,r=a.thumbnailImageSrc,s=a.trackingToken;b[0]!==n||b[1]!==p?(a={isMediaRendered:!0,mediaId:n,post:p},b[0]=n,b[1]=p,b[2]=a):a=b[2];n=c("usePolarisSponsoredPostCTAFooterDominantColor")(a);p=n.ctaFooterViewpointRef;b[3]!==s||b[4]!==q||b[5]!==h?(a=function(){c("InstagramODS").incr("web.ads.feed.link_click"),c("InstagramWebAdEventsAuditFalcoEvent").log(function(){return{client_token:s,event:"persistent_cta_click",social_context_type:q}}),h!==null&&h==="story"?c("InstagramODS").incr("web.ads.story.msite_persistent_link_click"):c("InstagramODS").incr("web.ads.feed.persistent_link_click")},b[3]=s,b[4]=q,b[5]=h,b[6]=a):a=b[6];var t=a;a=l+((n=d)!=null?n:0)+"px";b[7]!==a?(d={bottom:a},b[7]=a,b[8]=d):d=b[8];var u=d;b[9]!==h?(n=function(){h!==null&&h==="story"?c("InstagramODS").incr("web.ads.story.msite_persistent_cta_rendered"):c("InstagramODS").incr("web.ads.feed.persistent_cta_rendered")},a=[h],b[9]=h,b[10]=n,b[11]=a):(n=b[10],a=b[11]);j(n,a);b[12]!==u||b[13]!==e||b[14]!==g||b[15]!==m||b[16]!==r||b[17]!==t||b[18]!==f?(d=function(a){return i.jsx("div",{className:"x1escl5o xtzzx4i xixxii4 xr6a42u x11uqc5h",ref:a,style:u,children:i.jsx(c("PolarisPostFooterCTA.react"),{ctaAdditionalAnimation:e,ctaDominantColor:g,disableAnimation:!0,externalURL:m,forceBottomBorder:!1,icon:i.jsx(c("PolarisSponsoredPersistentCTAThumbnail.react"),{thumbnailImageSrc:r}),isActive:!0,isForAd:!0,isForPersistentCta:!0,onClick:t,showChevron:!0,showRoundedBorder:!0,text:f})})},b[12]=u,b[13]=e,b[14]=g,b[15]=m,b[16]=r,b[17]=t,b[18]=f,b[19]=d):d=b[19];b[20]!==p||b[21]!==d?(n=i.jsx(c("PolarisClickEventLoggerProvider.react"),{children:i.jsx(c("PolarisTrackingNodeProvider.react"),{ref:p,trackingNode:86,children:d})}),b[20]=p,b[21]=d,b[22]=n):n=b[22];b[23]!==o||b[24]!==s||b[25]!==n?(a=i.jsx(c("PolarisTrackingCodeProvider.react"),{isSponsored:!0,m_pk:o,trackingToken:s,children:n}),b[23]=o,b[24]=s,b[25]=n,b[26]=a):a=b[26];return a}function a(a){var b=k(25),e=a.entryPoint,f=a.mpk,g;b[0]!==f?(g=c("getPolarisPostIdFromNativeId")(f),b[0]=f,b[1]=g):g=b[1];var h=g;f=d("polarisAdsSelectors.react").useFeedAdInfo(h,o);g=d("polarisAdsSelectors.react").useStoryAdInfo(h,n);g=e!==null&&e==="story"?g:f;b[2]!==h?(f=function(a){return d("polarisPostSelectors").getPostById(a,h)},b[2]=h,b[3]=f):f=b[3];f=c("usePolarisSelector")(f);var j=f.isSidecar,l=f.src,p=f.thumbnailSrc;if(b[4]!==j||b[5]!==f){var q;q=j===!0?(q=d("PolarisPostUtils").getCurrentSidecarItemFromPost(f,0))==null?void 0:q.id:f.id;b[4]=j;b[5]=f;b[6]=q}else q=b[6];j=q;p=(q=p)!=null?q:l;if(j==null||p==null)return null;if(b[7]!==(g==null?void 0:g.ctaItems)||b[8]!==j){q=g==null?void 0:(q=g.ctaItems)==null?void 0:(l=q.get(j))==null?void 0:l.ctaLinkUrl;b[7]=g==null?void 0:g.ctaItems;b[8]=j;b[9]=q}else q=b[9];l=q;if(b[10]!==(g==null?void 0:g.ctaItems)||b[11]!==j){q=g==null?void 0:(q=g.ctaItems)==null?void 0:(q=q.get(j))==null?void 0:q.ctaLinkText;b[10]=g==null?void 0:g.ctaItems;b[11]=j;b[12]=q}else q=b[12];q=q;if(b[13]!==(g==null?void 0:g.ctaItems)||b[14]!==j){var r;r=g==null?void 0:(r=g.ctaItems)==null?void 0:(r=r.get(j))==null?void 0:r.ctaDominantColor;b[13]=g==null?void 0:g.ctaItems;b[14]=j;b[15]=r}else r=b[15];g=r;if(l==null||q==null)return null;b[16]!==a||b[17]!==q||b[18]!==g||b[19]!==e||b[20]!==l||b[21]!==j||b[22]!==f||b[23]!==p?(r=i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(m,babelHelpers["extends"]({},a,{ctaLinkText:q,domColor:g,entryPoint:e,externalURL:l,mediaId:j,post:f,thumbnailImageSrc:p}))}),b[16]=a,b[17]=q,b[18]=g,b[19]=e,b[20]=l,b[21]=j,b[22]=f,b[23]=p,b[24]=r):r=b[24];return r}function n(a){return a}function o(a){return a}g["default"]=a}),98);
__d("PolarisNewsMultiregionBlock.react",["fbt","IGDSBox.react","IGDSNewsOffOutlineIcon.react","IGDSText.react","PolarisAdvisoryMessage.react","PolarisExternalLink.react","SableNewsEventFalcoEvent","react","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c,m="https://transparency.fb.com/policies/other-policies/policies/news-legislation";function a(a){var b=l(14),d=a.isOwnProfile,e=a.userID,f=c("usePolarisViewer")();b[0]!==e||b[1]!==f||b[2]!==d?(a=function(){c("SableNewsEventFalcoEvent").log(function(){var a;return{account_viewed_id:e,event_name:"publisher_profile_block",ig_user_id:(a=f==null?void 0:f.id)!=null?a:"0",viewer_is_regulated_c18:d}})},b[0]=e,b[1]=f,b[2]=d,b[3]=a):a=b[3];var g=f==null?void 0:f.id,i;b[4]!==e||b[5]!==g||b[6]!==d?(i=[e,g,d],b[4]=e,b[5]=g,b[6]=d,b[7]=i):i=b[7];k(a,i);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(g=j.jsx(c("IGDSBox.react"),{marginBottom:3,children:j.jsx(c("IGDSNewsOffOutlineIcon.react"),{alt:"Icon indicating that news is disabled",size:32})}),b[8]=g):g=b[8];b[9]!==d?(a=j.jsx(c("IGDSText.react"),{weight:"bold",children:d?h._("__JHASH__wKIHchbDHIo__JHASH__"):h._("__JHASH__I-K5phQ5CZs__JHASH__")}),b[9]=d,b[10]=a):a=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx("p",{children:j.jsx(c("IGDSText.react"),{color:"secondaryText",children:h._("__JHASH__t5HmAhcDN2S__JHASH__",[h._implicitParam("=m2",j.jsx(c("PolarisExternalLink.react"),{href:m,children:h._("__JHASH__1CjBBfncVci__JHASH__")}))])})}),b[11]=i):i=b[11];b[12]!==a?(g=j.jsxs(c("PolarisAdvisoryMessage.react"),{children:[g,a,i]}),b[12]=a,b[13]=g):g=b[13];return g}g["default"]=a}),226);
__d("PolarisProfilePostsGridInstantModal_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PolarisProfilePostsGridInstantModal_media",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"pk",storageKey:null},action:"THROW",path:"pk"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"code",storageKey:null},action:"THROW",path:"code"},{alias:null,args:null,kind:"ScalarField",name:"original_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_width",storageKey:null}],type:"XDTMediaDict",abstractKey:null};e.exports=a}),null);
__d("PolarisProfilePostsGridInstantModal.react",["CometRelay","PolarisInstantPostModal.react","PolarisIsLoggedInDesktop","PolarisPost.react","PolarisPostVariants","PolarisProfilePostsGridInstantModal_media.graphql","PolarisRoutes","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var e=j(19),f=a.analyticsContext,g=a.media$key,i=a.mediaLinkBuilder,l=a.modalEntryPath,m=a.onClose,n=a.onOpen;a=a.postIDs;g=d("CometRelay").useFragment(h!==void 0?h:h=b("PolarisProfilePostsGridInstantModal_media.graphql"),g);if(!a.includes(g.pk))return null;var o;e[0]!==g.original_height||e[1]!==g.original_width?(o=g.original_height!=null&&g.original_width!=null?{height:g.original_height,width:g.original_width}:void 0,e[0]=g.original_height,e[1]=g.original_width,e[2]=o):o=e[2];o=o;l=c("isStringNullOrEmpty")(l)?d("PolarisRoutes").FEED_PATH:l;var p=g.code,q=g.pk,r=f+"Modal",s;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("PolarisIsLoggedInDesktop").isLoggedInDesktop(),e[3]=s):s=e[3];e[4]!==r||e[5]!==g.pk||e[6]!==g.code?(s=k.jsx(c("PolarisPost.react"),{analyticsContext:r,autoplay:s,id:g.pk,isVisible:!0,shortcode:g.code,testid:void 0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0}),e[4]=r,e[5]=g.pk,e[6]=g.code,e[7]=s):s=e[7];e[8]!==f||e[9]!==a||e[10]!==o||e[11]!==i||e[12]!==l||e[13]!==m||e[14]!==n||e[15]!==g.code||e[16]!==g.pk||e[17]!==s?(r=k.jsx(c("PolarisInstantPostModal.react"),{analyticsContext:f,combinedPostIds:a,dimensions:o,mediaLinkBuilder:i,modalEntryPath:l,onClose:m,onOpen:n,postCode:p,postId:q,children:s}),e[8]=f,e[9]=a,e[10]=o,e[11]=i,e[12]=l,e[13]=m,e[14]=n,e[15]=g.code,e[16]=g.pk,e[17]=s,e[18]=r):r=e[18];return r}g["default"]=a}),98);
__d("useThrottledComet",["CometThrottle","react","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useLayoutEffect,k=b.useRef;function a(a,b){b===void 0&&(b=100);var d=k(a);j(function(){d.current=a},[a]);var e=c("useStable")(function(){return c("CometThrottle")(function(){var a=arguments;return d.current==null?void 0:d.current.apply(d,a)},b)});i(function(){return function(){e.cancel()}},[]);return e}g["default"]=a}),98);
__d("useThrottledImpl",["cr:1708227"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:1708227")}),98);/*FB_PKG_DELIM*/
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l=k.useEffect,m=k.c;function a(a){return babelHelpers["extends"]({},d("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(a),{is_dm:d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a),is_instamadillo:d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),is_instamadillo_tlc:d("IGDInstamadilloUtils").isInstamadilloCutover(a)})}function n(a,b){var c=d("IGDInstamadilloUtils").isInstamadilloCutover(a),e=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),f=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);b.addAnnotationBoolean("is_instamadillo",e);b.addAnnotationBoolean("is_instamadillo_tlc",c);b.addAnnotationBoolean("is_dm",f);b.addAnnotationBoolean("is_instamadillo_ttlc",(e=d("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(a));b.addAnnotationBoolean("is_instamadillo_ttlc_audio",e.isInstamadilloTTLCAudioEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_clip",e.isInstamadilloTTLCClipEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",e.isInstamadilloTTLCGenericXmaEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_image",e.isInstamadilloTTLCImageEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_link",e.isInstamadilloTTLCLinkEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_media_share",e.isInstamadilloTTLCMediaShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_profile",e.isInstamadilloTTLCProfileEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",e.isInstamadilloTTLCReelShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_story_share",e.isInstamadilloTTLCStoryShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_text",e.isInstamadilloTTLCTextEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_video",e.isInstamadilloTTLCVideoEnabled(a))}function b(a){var b=m(3),e,f;b[0]!==a?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(b){n(a,b)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);d("Int64Hooks").useEffectInt64(e,f)}var o=new Set();function e(a){var b=m(7),e;b[0]!==a.threadKey||b[1]!==a.consistentThreadFbid||b[2]!==a.threadType||b[3]!==a.threadSubtype?(e=function(){var b=(i||(i=d("I64"))).to_string(a.threadKey);c("InteractionTracing").getPendingInteractions().forEach(function(c){var e=o.has(b);c.addAnnotationBoolean("is_thread_visited",e);c.addAnnotation("thread_key",(i||(i=d("I64"))).to_string(a.threadKey));a.consistentThreadFbid!=null&&c.addAnnotation("consistent_thread_fbid",(i||(i=d("I64"))).to_string(a.consistentThreadFbid));c.addAnnotationInt("thread_type",(j||(j=d("LSIntEnum"))).toNumber(a.threadType));a.threadSubtype!=null&&c.addAnnotation("thread_subtype",(i||(i=d("I64"))).to_string(a.threadSubtype))});return function(){o.add(b)}},b[0]=a.threadKey,b[1]=a.consistentThreadFbid,b[2]=a.threadType,b[3]=a.threadSubtype,b[4]=e):e=b[4];var f;b[5]!==a?(f=[a],b[5]=a,b[6]=f):f=b[6];d("Int64Hooks").useEffectInt64(e,f)}function f(){var a=m(5),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e;a[0]!==b?(e=b!=null?(i||(i=d("I64"))).to_string(b):null,a[0]=b,a[1]=e):e=a[1];var f=e;a[2]!==f?(b=function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){if(f==null){a.addAnnotationInt("rendered_direct_null_state",1);a.addAnnotationInt("has_thread_key",0);return}a.addAnnotationInt("has_thread_key",1);a.addAnnotationInt("rendered_direct_null_state",0)})},e=[f],a[2]=f,a[3]=b,a[4]=e):(b=a[3],e=a[4]);l(b,e)}g.getInstamadilloBooleanAnnotations=a;g.addInstamadilloAnnotationsToInteractionTrace=n;g.useAddInstamadilloAnnotationsToInteractionTraces=b;g.useAddThreadAnnotationToInteractionTraces=e;g.useAddThreadRouteAnnotations=f}),98);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCreateOfflineThreadingID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[void 0,void 0],d[3]=e[0],d[4]=e[1],e):(c=b.item,e=[a[1],c.authorityLevel],d[3]=e[0],d[4]=e[1],e)})},function(a){return a=[d[3],d[4]],d[0]=a[0],d[1]=a[1],a}]):c.resolve((b=[void 0,void 0],d[0]=b[0],d[1]=b[1],b))},function(e){return c.i64.neq(d[0],void 0)?c.sequence([function(e){return c.i64.neq(d[1],void 0)?c.i64.gt(a[2],d[1])?c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[d[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[2]})})},function(a){return d[3]=new c.Map(),d[3].set("thread_fbid",d[0]),d[3].set("force_upsert",!1),d[3].set("use_open_messenger_transport",!1),d[3].set("sync_group",c.i64.cast([0,95])),d[3].set("metadata_only",!1),d[3].set("preview_only",!1),d[4]=d[3].get("thread_fbid"),d[3],d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,209]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):c.resolve():c.resolve()},function(a){return d[2]=d[0]}]):c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.sequence([function(e){return c.i64.neq(a[2],c.i64.cast([0,20]))?(d[10]=new c.Map(),d[10].set("thread_fbid",a[1]),d[10].set("force_upsert",!1),d[10].set("use_open_messenger_transport",!1),d[10].set("sync_group",c.i64.cast([0,95])),d[10].set("metadata_only",!1),d[10].set("preview_only",!1),d[11]=d[10].get("thread_fbid"),d[10],d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[11]),c.i64.cast([0,209]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(b){return d[3]=a[1]}]):c.sequence([function(a){return d[10]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[3]=d[11]}])},function(b){return c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))?(b=["inbox",c.i64.cast([0,0])],d[4]=b[0],d[5]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,1]))?(b=["pending",c.i64.cast([-1,4294967295])],d[10]=b[0],d[11]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,2]))?(b=["other",c.i64.cast([-1,4294967294])],d[12]=b[0],d[13]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,3]))?(b=["spam",c.i64.cast([-1,4294967293])],d[14]=b[0],d[15]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,5]))?(b=["hidden",c.i64.cast([-1,4294967292])],d[16]=b[0],d[17]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,4]))?(b=["archived",c.i64.cast([-1,4294967286])],d[18]=b[0],d[19]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,15]))?(b=["restricted",c.i64.cast([-1,4294967281])],d[20]=b[0],d[21]=b[1],b):(b=["inbox",c.i64.cast([0,0])],d[20]=b[0],d[21]=b[1],b),b=[d[20],d[21]],d[18]=b[0],d[19]=b[1],b),b=[d[18],d[19]],d[16]=b[0],d[17]=b[1],b),b=[d[16],d[17]],d[14]=b[0],d[15]=b[1],b),b=[d[14],d[15]],d[12]=b[0],d[13]=b[1],b),b=[d[12],d[13]],d[10]=b[0],d[11]=b[1],b),b=[d[10],d[11]],d[4]=b[0],d[5]=b[1],b),d[6]=c.i64.cast([0,1083495711]),d[7]=c.i64.cast([0,1024]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,0]),c.forEach(c.filter(c.db.table(9).fetch([[[d[3]]]]),function(b){return c.i64.eq(b.threadKey,d[3])&&c.i64.lt(b.authorityLevel,a[2])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[3],mailboxType:c.i64.cast([0,4096]),threadType:a[0],folderName:d[4],lastActivityTimestampMs:c.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:c.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:c.i64.cast([-1,4294967295]),ongoingCallState:c.i64.cast([0,0]),parentThreadKey:d[5],authorityLevel:a[2],capabilities:d[6],capabilities2:d[7],capabilities3:d[8],capabilities4:d[9],unsendLimitMs:c.i64.cast([-1,4294967295]),syncGroup:c.i64.cast([0,95]),isHidden:!0,clientThreadKey:d[3]})},function(a){return d[2]=d[3]}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure";e.exports=a}),null);
__d("LSVerifyThreadExists",["LSVerifyThreadExistsV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.storedProcedure(b("LSVerifyThreadExistsV2"),a[0],a[1],a[2],a[3],a[4],!1,a[5],!1,!1)},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxVerifyThreadExistsStoredProcedure";e.exports=a}),null);
__d("LSVerifyThreadRowExists",["LSVerifyThreadExists"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.storedProcedure(b("LSVerifyThreadExists"),a[0],a[1]==null?c.i64.cast([0,1]):a[1],"inbox",c.i64.cast([0,0]),c.i64.cast([0,40])==null?c.i64.cast([0,40]):c.i64.cast([0,40]),a[2])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxVerifyThreadRowExistsStoredProcedure";e.exports=a}),null);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=d("MWChatInteraction").get((h||(h=d("I64"))).to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;e=(b=e==null?void 0:(b=e.annotations.string)==null?void 0:b.inboxEntrypoint)!=null?b:e==null?void 0:(b=e.annotations.string)==null?void 0:b.entrypoint;if(e!=null&&e!=="unknown")return e;b=d("MWChatInteraction").get("inbox_init");if(b!=null&&(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_string(b)))return"initInbox";e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b=e!=null?(b=c("InteractionTracingMetrics").get(e))==null?void 0:(e=b.annotations.string)==null?void 0:e.thread_id:null;return b===(h||(h=d("I64"))).to_string(a)?"auto_open":"unknown"}g["default"]=a}),98);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.getHasLinks=a}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasShare;h=h===void 0?!1:h;var i=a.hasSticker;i=i===void 0?!1:i;var j=a.hasVideo;j=j===void 0?!1:j;a=a.hasVoiceClip;a=a===void 0?!1:a;var k=g.None;e?k=g.Image:j?k=g.Video:d?k=g.HotEmoji:i?k=g.Sticker:c?k=g.Gif:a?k=g.Audio:f?k=g.Link:b?k=g.File:h&&(k=g.Share);return k}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWVersion",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("2");g.v2=a}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWHasLinksUtil","MWMsgMediaTypeLogUtils","MWVersion","MultipleTabsLogger","asyncToGeneratorRuntime","cr:6985","gkx","isArmadillo","isStringNullOrEmpty","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting"}),k=b("$InternalEnum")({Text:"text",NonText:"non-text"});function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.hasAttachment,g=a.hasEphemeralSetting,i=a.hasGroupInvite,l=a.hasReaction,m=a.hasReply,n=a.hasSenderKeyDistribution,p=a.hasStoryReply,q=a.hasText,r=a.isUnsend;a=babelHelpers.objectWithoutPropertiesLoose(a,["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isUnsend"]);var s=j.Send;m?s=j.Reply:p?s=j.StoryReply:r?s=j.Unsend:l?s=j.Reaction:i?s=j.GroupInvite:g?s=j.EphemeralSetting:n&&(s=j.SenderKeyDistribution);m=d("MWMsgMediaTypeLogUtils").getAttachmentType(a);p=q&&(!m||m===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?k.Text:k.NonText;return{bool:{has_attachment:f,has_sticker:a.hasSticker,is_attachments_grouped:a.isAttachmentsGrouped,is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_pdb:Boolean(c("gkx")("24032")),is_tlc_public_user:c("gkx")("24028"),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},"int":{number_of_attachments:a.numberOfAttachments,number_of_grouped_attachments:a.numberOfGroupedAttachments},string:{action_type:s,attachment_type:m,entrypoint:o(b),message_type:p,multipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(h||(h=d("I64"))).to_string(d("MWVersion").v2),root_component:e}}});return m.apply(this,arguments)}function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var i=b("cr:6985")!=null?yield b("cr:6985").isCutoverThreadKey(a.threadKey):!1;e=(yield l(e,f,g));return{bool:babelHelpers["extends"]({},e.bool,d("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(a),{is_community_event:a.eventStartTimestampMs!=null,is_cutover:c("isArmadillo")()&&i,is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_secure:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)}),"int":babelHelpers["extends"]({},e["int"]),string:babelHelpers["extends"]({},e.string,{consistent_thread_fbid:a.consistentThreadFbid!=null?(h||(h=d("I64"))).to_string(a.consistentThreadFbid):null,original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?(h||(h=d("I64"))).to_string(a.threadSubtype):null,thread_type:h.to_string(a.threadType)})}});return n.apply(this,arguments)}function e(a,e,f,g){var i=e.hasFile;i=i===void 0?!1:i;var l=e.hasGif;l=l===void 0?!1:l;var m=e.hasHotEmoji;m=m===void 0?!1:m;var n=e.hasImage;n=n===void 0?!1:n;var o=e.hasLinks;o=o===void 0?!1:o;var p=e.hasReply;p=p===void 0?!1:p;var q=e.hasShare;q=q===void 0?!1:q;var r=e.hasSticker;r=r===void 0?!1:r;var s=e.hasStoryReply;s=s===void 0?!1:s;var t=e.hasText;t=t===void 0?!1:t;var u=e.hasVideo;u=u===void 0?!1:u;var v=e.hasVoiceClip;v=v===void 0?!1:v;var w=e.isAttachmentsGrouped,x=e.numberOfAttachments;x=x===void 0?0:x;e=e.numberOfGroupedAttachments;e=e===void 0?0:e;var y=j.Send;p?y=j.Reply:s&&(y=j.StoryReply);p=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:i,hasGif:l,hasHotEmoji:m,hasImage:n,hasLinks:o,hasShare:q,hasSticker:r,hasVideo:u,hasVoiceClip:v,numberOfAttachments:x,numberOfGroupedAttachments:e});s=t&&(!p||p===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?k.Text:k.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",p);a.addAnnotation("action_type",y);a.addAnnotation("message_type",s);a.addAnnotation("original_entrypoint",c("MWGetOriginalEntrypoint")(f.threadKey));g!=null&&a.addAnnotation("root_component",g);a.addAnnotationInt("number_of_attachments",x);w!=null&&a.addAnnotationBoolean("is_attachments_grouped",w);a.addAnnotation("thread_id",(h||(h=d("I64"))).to_string(f.threadKey));f.consistentThreadFbid!=null&&a.addAnnotation("consistent_thread_fbid",(h||(h=d("I64"))).to_string(f.consistentThreadFbid));a.addAnnotation("thread_type",h.to_string(f.threadType));f.threadSubtype!=null&&a.addAnnotation("thread_subtype",(h||(h=d("I64"))).to_string(f.threadSubtype));b("cr:6985")!=null&&c("promiseDone")(b("cr:6985").isCutoverThreadKey(f.threadKey),function(b){a.addAnnotationBoolean("is_cutover",b)});d("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(f,a);a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb",Boolean(c("gkx")("24032")))}function f(a){var b=a.externalAttachmentUrl,e=a.hotEmojiSize,f=a.isEphemeralSetting,g=a.isGroupInvite,h=a.isReaction,i=a.isSenderKeyDistribution,j=a.isUnsend,k=a.mediaGroupInfo,l=a.mediaStagings,m=a.messageText,n=a.reply,o=a.sentFromShareSheet,p=a.stickerId,q=a.threadType;a=a.voiceClip;var r=!c("isStringNullOrEmpty")(m);m=d("MWHasLinksUtil").getHasLinks(m);var s=!1;a=a!=null;a?s=!0:b!=null&&(s=!0);var t=!1,u=!1,v=!1,w=0,x=0,y;if(l!=null&&l.length>0){s=!0;for(var z of l){var A=z.mimeType;A.indexOf("image")!==-1&&(t=!0);A.indexOf("video")!==-1&&(u=!0);A.indexOf("application")!==-1&&(v=!0)}if(t&&q!=null){A=d("LSMessagingThreadTypeUtil").isArmadilloSecure(q);y=!A||c("gkx")("5318")===!0}w=l.length}k!=null&&(y=!0,x=k.messagesAndAttachments.length);z=e!=null;q=n!=null;A=n!=null;l=p!=null&&!z;k=!l&&b!=null;e=o===!0;n=h===!0;p=g===!0;b=f===!0;o=i===!0;return{hasAttachment:s,hasEphemeralSetting:b,hasFile:v,hasGif:k,hasGroupInvite:p,hasHotEmoji:z,hasImage:t,hasLinks:m,hasReaction:n,hasReply:q,hasSenderKeyDistribution:o,hasShare:e,hasSticker:l,hasStoryReply:A,hasText:r,hasVideo:u,hasVoiceClip:a,isAttachmentsGrouped:y,isUnsend:(h=j)!=null?h:!1,numberOfAttachments:w,numberOfGroupedAttachments:x}}function o(a){var b;return(b=Object.keys(c("LSMessagingThreadAttributionType")).find(function(b){return c("LSMessagingThreadAttributionType")[b]===a}))!=null?b:"UNKNOWN"}function p(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2)))return"media";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4)))return"audio";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728)))return"sticker";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384)))return"gif";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64)))return"file";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1)))return"text";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1024))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912)))return"XMA";else return"unknown"}g.ActionType=j;g.MsgType=k;g.getSendToSentBaseAnnotations=l;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.getMessageTypeParams=f;g.getEntrypointAnnotation=o;g.getMessageTypeFromDisplayedContentType=p}),98);/*FB_PKG_DELIM*/
__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("LSBase64Encode.nop",["Base64Utils","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return(h||(h=b("Promise"))).resolve(c("LSResult")(f?d("Base64Utils").fromArrayBuffer(f):void 0))};g["default"]=a}),98);
__d("LSBinaryToHex.nop",["LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,d,e){a=Array.from(new Uint8Array(e));d=a.map(function(a){return a.toString(16).padStart(2,"0")});e=d.join("").toUpperCase();return(h||(h=b("Promise"))).resolve(c("LSResult")(e))};g["default"]=a}),98);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("LSCreateDerivedKeys.nop",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){var l=d("CryptoLogger").CryptoLogger("create_derived_keys");a=c("LSVec").toArray(k);if(a.length<1||a.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){l.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var m=a.map((i||(i=d("I64"))).to_int32),n=a.map(i.to_int32).reduce(function(a,b){return a+b},0)*8;return d("XPlatReactCrypto").subtleImportKey("raw",j,"HKDF",!1,["deriveBits"]).then(function(a){var b;return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:f,name:"HKDF",salt:(b=g)!=null?b:new Uint8Array(10).buffer},a,n)}).then(function(a){a=new Uint8Array(a);var b=[],e=0;for(var f=0,g=m.length;f<g;++f){var h=e+m[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))})["catch"](function(a){l.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})};g["default"]=a}),98);
__d("LSCryptoUtils",["FBLogger","XPlatReactTextDecoder","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new Uint8Array(a)}function h(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a)}function i(a){var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}function b(a){return i(new Uint8Array(a))}function e(a){return h(a).buffer}function f(a,b){var d=a.byteLength,e=b.byteLength;if(d!==e)throw c("FBLogger")("ls_web_init").mustfixThrow("Mismatched lengths for modAdd, %d != %d",d,e);var f=new Uint8Array(d);new Uint8Array(d).reduceRight(function(c,d,e){d=a[e];var g=b[e];d=d+g+c;g=d>255?[d-256,1]:[d,0];f[e]=g[0];return g[1]},0);return f}g.bufToUint8=a;g.strToUint8=h;g.uint8ToStr=i;g.bufToStr=b;g.strToBuf=e;g.modAddBytes=f}),98);
__d("LSDatabaseProviderType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return g(a.persistenceTypes)}function g(a){return a.includes("indexeddb")}f.isProviderPersisted=a;f.hasPersistentType=g}),66);
__d("LSDeserializeFromJsonIntoDictionaryV2.nop",["LSDict","LSJson","Promise","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=d("LSJson").parse(f,{useLSTypes:!0});if(a instanceof c("LSDict"))return(h||(h=b("Promise"))).resolve([a]);throw c("unrecoverableViolation")("unexpected Dictionary type","messenger_web_product")};g["default"]=a}),98);
__d("LSGetBlobFromInt64BE.nop",["I64","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f){var g=new Uint8Array(8);g.reduceRight(function(a,b,c){b=(i||(i=d("I64"))).to_int32(i.mod_(a,i.of_string("256")));g[c]=b;return i.div(a,i.of_string("256"))},f);return(h||(h=b("Promise"))).resolve(c("LSResult")(g.buffer))};g["default"]=a}),98);
__d("LSGetBlobFromString.nop",["CryptoLogger","LSResult","Promise","XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){a=new(d("XPlatReactTextEncoder").TextEncoder)();try{e=a.encode(f).buffer;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}catch(g){e=d("CryptoLogger").CryptoLogger("get_blob_from_string");e.catching(g).mustfix(g.message?g.message:"Error in get blob from string.");e=a.encode(f).buffer;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}};g["default"]=a}),98);
__d("LSHmac_v2.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g){return d("XPlatReactCrypto").subtleImportKey("raw",f,{hash:"SHA-256",name:"HMAC"},!1,["sign"]).then(function(a){return d("XPlatReactCrypto").subtleSign("HMAC",a,g)}).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a))})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("hmac_v2"),a).mustfix("Crypto signing failed");throw a})};g["default"]=a}),98);
__d("LSInternetConnectionState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_CONNECTED:0,CONNECTED:1});f["default"]=a}),66);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}a.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure";e.exports=a}),null);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}a.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure";e.exports=a}),null);
__d("LSIssueNewFireAndForgetTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return c[0]=b.i64.of_float(Date.now()),b.db.table(5).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:c[0]})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewFireAndForgetTaskStoredProcedure";e.exports=a}),null);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};g["default"]=a}),98);
__d("LSOcmfClientMap.nop",["CryptoLogger","LSResult","Promise","XPlatReactCrypto","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("ristretto255").__setRef("LSOcmfClientMap.nop");a=function(a,e,f,g){return(h||(h=b("Promise"))).all([d("XPlatReactCrypto").subtleDigest("SHA-512",g),i.load()]).then(function(a){var b=a[0];a=a[1];b=a.fromHash(new Uint8Array(b));a=a.scalarMult(new Uint8Array(f),b);return c("LSResult")(a.buffer)})["catch"](function(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("ocmf_client_map"),a).mustfix("Failed OcmfClientMap.");throw a})};g["default"]=a}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);
__d("OrderPreservingEncryption",["FBLogger","LSCryptoUtils","Promise","UInt8Array","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(32)).buffer}function i(a){var b=a.length;return b%2!==0?"0"+a:a}function j(a){a=BigInt(a);var b=i(a.toString(16));a=b.length;a=a/2;var c=[];for(var d=0;d<a;++d)c.push(d*2);return new Uint8Array(c.map(function(a){var c=a+2;return b.slice(a,c)}).map(function(a){return parseInt(a,16)}))}function k(a){a=a.map(function(a){return a._0});return{_0:d("UInt8Array").concatBytes(a)}}function l(a){return"OPE key has length "+String(a)+", expected  "+String(32)}function m(a,b,c){return d("XPlatReactCrypto").subtleImportKey("raw",a.buffer,"HKDF",!1,["deriveKey","deriveBits"]).then(function(a){var e=new ArrayBuffer(0);return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:b.buffer,name:"HKDF",salt:e},a,c*8)}).then(function(a){return{_0:d("LSCryptoUtils").bufToUint8(a)}})}function n(a,b){return{_0:d("LSCryptoUtils").modAddBytes(a._0,b)}}function o(a,e,f,g){var i=f.byteLength;if(i!==32)throw c("FBLogger")("labyrinth_web").mustfixThrow(l(i));var j=g.byteLength,o=function(a,b){var c=new Uint8Array(1+j),d=new Uint8Array(j-b).fill(0);c.set([b]);c.set(a.subarray(0,b),1);c.set(d,b+1);return c};if(j>=255)throw c("FBLogger")("labyrinth_web").mustfixThrow("Input is too large");return(h||(h=b("Promise"))).all(Array.from(g).map(function(b,c){c=o(g,c);var e=new Uint8Array(a);e[a-1]=b;b=d("LSCryptoUtils").bufToUint8(f);return m(b,c,a).then(function(a){return n(a,e)})})).then(function(a){return d("UInt8Array").concatBytes([new Uint8Array([e]),k(a)._0])})}function e(a,b,c,d){d=j(d);return o(a,b,c,d)}g.keyGen=a;g.intStringToBEBytes=j;g.buildKeyLengthErrorMsg=l;g.encryptBigEndianBytes=o;g.encryptIntString=e}),98);
__d("LSOpeEncrypt.nop",["CryptoLogger","I64","LSResult","OrderPreservingEncryption","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j){var k=d("CryptoLogger").CryptoLogger("ope_encrypt");return d("OrderPreservingEncryption").encryptBigEndianBytes((i||(i=d("I64"))).to_int32(j),1,f,new Uint8Array(g)).then(function(a){return(h||(h=b("Promise"))).resolve(c("LSResult")(a.buffer))})["catch"](function(a){d("CryptoLogger").captureError(k,a).mustfix("OpeEncrypt_impl failed");throw a})};g["default"]=a}),98);
__d("LSProgramTarget",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DASM:1,JS:2,JSON:3});c=a;f["default"]=c}),66);
__d("LSTruncateSortKey.nop",["CryptoLogger","LSResult","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("truncate_sort_key");a=function(a,d,e){if(e.byteLength!==8)throw i.mustfixThrow("Bad length on sort key for truncation");a=new Uint8Array(e);d=a.subarray(0,2);if(d.some(function(a){return a!==0}))throw i.mustfixThrow("Bad prefix on sort key for truncation");return(h||(h=b("Promise"))).resolve(c("LSResult")(e.slice(2)))};g["default"]=a}),98);
__d("ReQLTable",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=(yield a.get.apply(a,b));c=c(d);yield a.upsert(b,c)});return g.apply(this,arguments)}f.update=a}),66);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
__d("updateAndFlushLSDataTrace",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("unrecoverableViolation")("Data trace is missing "+e,"maw_db")}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("BTManifestName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MAIN:"main",LONGTAIL:"longtail"});c=a;f["default"]=c}),66);
__d("BtLongtailHashFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5779");b=d("FalcoLoggerInternal").create("bt_longtail_hash",a);e=b;g["default"]=e}),98);
__d("CometBTManifestLoader",["BootloaderEvents","BtLongtailHashFalcoEvent","ClientConsistencyEventEmitter","FBLogger","ODS","Promise","SiteData","XHRRequest","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set();function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e,f){var g=(yield new(i||(i=b("Promise")))(function(b,g){new(c("XHRRequest"))(a+"/btmanifest/"+e+"/"+d+"/"+f).setMethod("GET").setResponseHandler(function(a){return b(a.toString())}).setErrorHandler(function(a){return g(a)}).send()}));if(typeof g!=="string")throw c("FBLogger")("binary_transparency","bt_invalid_manifest_response").mustfixThrow("Invalid response from BT manifest endpoint");return g});return l.apply(this,arguments)}function m(a,b){(h||(h=d("ODS"))).bumpEntityKey(454,"obc.www.all","bt.comet_manifest_loader."+Number(d("SiteData").compose_bootloads)+"."+d("SiteData").pkg_cohort+"."+a+"."+b)}function n(a,b,d){var e;if(d instanceof Error)e=d;else if(typeof d==="object"){var f=JSON.stringify(d);e=c("err")("(XHRRequest): %s",f.slice(0,300)+(f.length>300?"...":""))}else e=c("err")(d);c("FBLogger")("binary_transparency","bt_download_manifest_error").catching(e).mustfix('Unable to download and inject BT manifest "%s" for version: %s',b,a)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("SiteData").manifest_origin||d("SiteData").manifest_version_prefix==null||d("SiteData").manifest_base_uri==null)return;var c=a+"_"+b;a=""+d("SiteData").manifest_version_prefix+a;if(j.has(c))return;m(b,"start");j.add(c);try{var e,f=document.createElement("script");f.innerText=(yield k(d("SiteData").manifest_base_uri,d("SiteData").manifest_origin,a,b));f.type="application/json";f.setAttribute("name","binary-transparency-manifest");f.dataset.manifestRev=a;f.dataset.manifestType=b;(e=document.head)==null?void 0:e.appendChild(f);m(b,"complete")}catch(d){m(b,"failed"),n(a,b,d),j["delete"](c)}});return p.apply(this,arguments)}function a(){c("promiseDone")(o(d("SiteData").client_revision,"main")),d("BootloaderEvents").onResourceInLongTailBTManifest(function(a){c("promiseDone")(o(d("SiteData").client_revision,"longtail")),a.hashes.forEach(function(b){c("BtLongtailHashFalcoEvent").log(function(){return{client_revision:String(d("SiteData").client_revision),compose_bootloads:d("SiteData").compose_bootloads,ef_page:d("SiteData").ef_page||"",hash:b,pkg_cohort:d("SiteData").pkg_cohort,reference:a.source,rls_id:d("SiteData").hsi}})})}),c("ClientConsistencyEventEmitter").addListener("newRevision",function(a){c("promiseDone")(o(a,"main")),c("promiseDone")(o(a,"longtail"))})}g.init=a}),98);
__d("IgFrCookieUpdaterFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5694");b=d("FalcoLoggerInternal").create("ig_fr_cookie_updater",a);e=b;g["default"]=e}),98);
__d("PolarisAPIGetFrCookieQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8244256172257887"}),null);
__d("PolarisAPIGetFrCookieQuery.graphql",["PolarisAPIGetFrCookieQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"_request_data"},{defaultValue:null,kind:"LocalArgument",name:"payload"}],c=[{alias:null,args:[{kind:"Variable",name:"_request_data",variableName:"_request_data"},{kind:"Variable",name:"payload",variableName:"payload"}],concreteType:"XDTGetEncryptedCredentialsResponse",kind:"LinkedField",name:"xdt_api__v1__web__accounts__get_encrypted_credentials",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fr",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PolarisAPIGetFrCookieQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PolarisAPIGetFrCookieQuery",selections:c},params:{id:b("PolarisAPIGetFrCookieQuery_instagramRelayOperation"),metadata:{is_distillery:!0},name:"PolarisAPIGetFrCookieQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PolarisAPIGetFrCookie",["CometRelay","PolarisAPIGetFrCookieQuery.graphql","PolarisInstapi","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return c("justknobx")._("999")?d("CometRelay").fetchQuery(e,h!==void 0?h:h=b("PolarisAPIGetFrCookieQuery.graphql"),{_request_data:{},payload:a}).toPromise().then(function(a){if(a==null)throw c("err")("Failed to get Fr cookie.");return{fr:a.xdt_api__v1__web__accounts__get_encrypted_credentials.fr}}):d("PolarisInstapi").apiPost("/api/v1/web/accounts/get_encrypted_credentials/",{body:{payload:a}}).then(function(a){return a.data})}g.getFrCookie=a}),98);
__d("buildIframeOriginUrl",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a}g["default"]=a}),98);
__d("PolarisFacebookCookieSyncConstants",["URI","buildIframeOriginUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;a={error:"ig_iframe_error",ig_sync:"ig_iframe_ig_sync",ig_sync_error:"ig_iframe_ig_sync_error",ig_sync_success:"ig_iframe_ig_sync_success",ready:"ig_iframe_ready",success:"ig_iframe_success",sync:"ig_iframe_fb_sync"};b=c("buildIframeOriginUrl")("https://www.facebook.com");d=new(h||(h=c("URI")))(b).getDomain();e="fr";g.IFRAME_MESSAGES=a;g.IFRAME_ORIGIN=b;g.IFRAME_DOMAIN=d;g.FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY=e}),98);
__d("XPolarisFacebookSyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/sync/instagram/",{})}),null);
__d("PolarisFacebookToInstagramCookieSync.react",["FBLogger","InstagramODS","PolarisFacebookCookieSyncConstants","SecureMessageListener","SecurePostMessage","XAsyncRequest","XPolarisFacebookSyncController","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c;function a(a){var b=j(6),e=a.frameRef,f=a.onCleanUp;b[0]!==e.current||b[1]!==f?(a=function(){var a=function(){c("InstagramODS").incr("web.cookie_sync.oo_cookie.start_fb_sync");var a=e.current;(a==null?void 0:a.contentWindow)!=null&&d("SecurePostMessage").sendMessageToSpecificOrigin(a.contentWindow,{eventName:d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync},d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)},b=function(b){if(b.origin!==d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN)return;var e=b.data.eventName;bb13:switch(e){case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:a();break bb13;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_success:c("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_success");e=c("XPolarisFacebookSyncController").getURIBuilder().getURI();new(c("XAsyncRequest"))().setURI(e).setMethod("POST").setData({encrypted_data:(e=b.data.data)==null?void 0:e.data}).setHandler(function(a){c("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_success")}).setErrorHandler(function(a){c("InstagramODS").incr("web.cookie_sync.oo_cookie.sync_fail");a=(a=a.errorDescription)!=null?a:"Error when syncing ig cookies";c("FBLogger")("ig_web").mustfix(a)}).send();f();break bb13;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ig_sync_error:c("InstagramODS").incr("web.cookie_sync.oo_cookie.retrieve_error");b=(e=b.data.errorDescription)!=null?e:"Exception thrown when syncing cookie to sync ig cookie";c("FBLogger")("ig_web").mustfix(b);f()}},g=new(c("SecureMessageListener"))(window).setEventHandler(b).setSupportedOrigins([d("PolarisFacebookCookieSyncConstants").IFRAME_DOMAIN]).beginListening();return function(){g.stopListening()}},b[0]=e.current,b[1]=f,b[2]=a):a=b[2];var g;b[3]!==e||b[4]!==f?(g=[e,f],b[3]=e,b[4]=f,b[5]=g):g=b[5];i(a,g);return null}g["default"]=a}),98);
__d("PolarisInstagramToFacebookCookieSync.react",["CometRelay","FBLogger","IgFrCookieUpdaterFalcoEvent","InstagramODS","PolarisAPIGetFrCookie","PolarisAdsGatingHelpers","PolarisConfig","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisWebStorage","SecurePostMessage","browserHistory_DO_NOT_USE","gkx","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef,l=Number(new Date().getTime());function m(a){var b=new Date().getTime()-l;a.total_latency=b.toString();a.country=d("PolarisConfig").getCountryCode();c("IgFrCookieUpdaterFalcoEvent").log(function(){return a})}function a(a){var b=a.frameRef,e=a.frData,f=a.onCleanUp;a=c("gkx")("25372");var g=c("gkx")("3478"),h=a&&g;g=(a=c("usePolarisViewer")())==null?void 0:a.id;a=d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory);var l=d("CometRelay").useRelayEnvironment(),n=d("PolarisAdsGatingHelpers").useEUFRCookieODSLogging();a=k({browser_history_path:a,iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:g,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:e,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});var o=a.current;j(function(){h||(o.is_blacklisted=!0,m(o),f())},[]);g=function(a){var b=a.data.eventName;o.iframe_message_origin=a.origin;if(a.origin!==d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN){b in d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES&&(o.iframe_message_origin_mismatch=!0,m(o));return}switch(b){case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.ready:c("InstagramODS").incr("web.frcookie.iframe.ready");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.ready");o.iframe_message_ready=!0;p();break;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.success:c("InstagramODS").incr("web.frcookie.iframe.success");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.success");o.iframe_message_success=!0;m(o);f();break;case d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.error:c("InstagramODS").incr("web.frcookie.iframe.error");n&&c("InstagramODS").incr("web.eu.frcookie.iframe.error");q();o.iframe_message_error=!0;m(o);break}};var p=function(){o.iframe_non_null=!1;o.iframe_content_window_non_null=!1;var a=b.current;if(a==null)return;e==null&&(c("InstagramODS").incr("web.frcookie.local_storage.empty"),n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.empty"));d("PolarisAPIGetFrCookie").getFrCookie(e,l).then(function(b){o.api_data=b.fr;if(b.fr===e){m(o);f();return}o.local_storage_same_as_api=!1;var g=c("PolarisWebStorage").getLocalStorage();if(g==null){m(o);f();return}o.is_local_storage_accessible=!0;if(b.fr===""){g.removeItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY);c("InstagramODS").incr("web.frcookie.local_storage.remove");n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.remove");m(o);f();return}g.setItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY,b.fr);o.show_iframe=!0;o.local_storage_updated=!0;o.iframe_payload=b.fr;o.iframe_non_null=!0;a.contentWindow!=null&&(o.iframe_content_window_non_null=!0,d("SecurePostMessage").sendMessageToSpecificOrigin(a.contentWindow,{data:b.fr,eventName:d("PolarisFacebookCookieSyncConstants").IFRAME_MESSAGES.sync},d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN));c("InstagramODS").incr("web.frcookie.local_storage.update");n&&c("InstagramODS").incr("web.eu.frcookie.local_storage.update")})["catch"](function(a){c("InstagramODS").incr("web.frcookie.get.error"),n&&c("InstagramODS").incr("web.eu.frcookie.get.error"),o.exception=a.toString(),m(o),c("FBLogger")("ig_web").catching(a).mustfix("Exception thrown when getting frCookie"),q()})},q=function(){var a=c("PolarisWebStorage").getLocalStorage();c("PolarisWebStorage").isLocalStorageSupported()&&a!=null&&a.removeItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY);f()};return h&&i.jsx(c("PolarisDOMListener.react"),{event:"message",handler:g,target:window})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisFacebookCookieSyncImpl.react",["IgFrCookieUpdaterFalcoEvent","JSScheduler","PolarisDOMListener.react","PolarisFacebookCookieSyncConstants","PolarisFacebookToInstagramCookieSync.react","PolarisInstagramToFacebookCookieSync.react","PolarisReactRedux.react","PolarisUA","PolarisWebStorage","RunComet","browserHistory_DO_NOT_USE","react","usePolarisViewer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef,m=b.useState,n=b.c,o=d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN+"/instagram/login_sync/",p=["terms","challenge"],q=3,r=Number(new Date().getTime());function s(a){var b=new Date().getTime()-r;a.total_latency=b.toString();c("IgFrCookieUpdaterFalcoEvent").log(function(){return a})}var t=function(){if(!d("PolarisUA").isIGWebview()&&c("PolarisWebStorage").isLocalStorageSupported()){var a=c("PolarisWebStorage").getLocalStorage();if(a!=null)return a.getItem(d("PolarisFacebookCookieSyncConstants").FR_COOKIE_UPDATED_LOCAL_STORAGE_KEY)}return null};function u(a){var b;a=a.frData;var e=l(null);b=(b=c("usePolarisViewer")())==null?void 0:b.id;b=l({browser_history_path:d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory),iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:b,is_blacklisted:!1,is_control_group:!1,is_local_storage_accessible:!1,local_storage_data:a,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});var f=b.current;b=function(){f.iframe_unload=!0};var g=m(!1),i=g[0],n=g[1];k(function(){var a=null,b=null,e=d("RunComet").onAfterLoad(function(){a=(h||(h=c("JSScheduler"))).scheduleLoggingPriCallback(function(){b=window.setTimeout(function(){n(!0)},q*1e3)})});return function(){b&&window.clearTimeout(b),a&&(h||(h=c("JSScheduler"))).cancelCallback(a),e&&e.remove()}},[]);g=m(!1);var p=g[0],r=g[1];g=m(!1);var t=g[0],u=g[1];g=p&&t;return!i?null:j.jsxs(j.Fragment,{children:[j.jsx("div",{hidden:!0,children:j.jsx("iframe",{onError:function(){f.iframe_on_error=!0,s(f)},onLoad:function(){f.iframe_on_load=!0},ref:e,src:o,style:{border:"none",display:"none",height:0,width:0},title:"fr"})}),g?null:j.jsxs(j.Fragment,{children:[j.jsx(c("PolarisInstagramToFacebookCookieSync.react"),{frameRef:e,frData:a,onCleanUp:function(){return r(!0)}}),j.jsx(c("PolarisFacebookToInstagramCookieSync.react"),{frameRef:e,onCleanUp:function(){return u(!0)}}),j.jsx(c("PolarisDOMListener.react"),{event:"beforeunload",handler:b,target:window})]})]})}u.displayName=u.name+" [from "+f.id+"]";function a(){var a,b=n(3),e=d("PolarisReactRedux.react").useSelector(v);a=(a=c("usePolarisViewer")())==null?void 0:a.id;if(e)return null;if(b[0]!==a){e=Symbol["for"]("react.early_return_sentinel");bb0:{var f=d("browserHistory_DO_NOT_USE").getPath(d("browserHistory_DO_NOT_USE").browserHistory);if(p.some(function(a){return f.includes(a)})){s({browser_history_path:f,iframe_origin:d("PolarisFacebookCookieSyncConstants").IFRAME_ORIGIN,ig_user_id:a,is_blacklisted:!0,is_control_group:!1,is_local_storage_accessible:!1,local_storage_same_as_api:!0,local_storage_updated:!1,show_iframe:!1});e=null;break bb0}}b[0]=a;b[1]=e}else e=b[1];if(e!==Symbol["for"]("react.early_return_sentinel"))return e;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(u,{frData:t()}),b[2]=a):a=b[2];return a}function v(a){return!!(a==null?void 0:(a=a.cookieModal)==null?void 0:a.visible)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSDatabase",[],(function(a,b,c,d,e,f){}),null);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum","LSMailboxInitialSyncCursor"],(function(a,b,c,d,e,f,g){"use strict";var h;a={locale:c("CurrentLocale").get()};b={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:(h||(h=d("LSIntEnum"))).ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:h.ofNumber(0),minTimeToSyncTimestampMs:h.ofNumber(-1),priority:h.ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:JSON.stringify(a),syncStatus:h.ofNumber(0)};e={epochId:void 0,failureCount:h.ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:h.ofNumber(0),lastSyncRequestTimestampMs:h.ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:h.ofNumber(0),taskQueueName:""};f=h.ofNumber(9999999999999);g.defaultSyncParams=a;g.defaultSyncGroup=b;g.defaultNetworkRequest=e;g.neverSyncTimestamp=f}),98);
__d("MNetRankType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNDEFINED_RANKING_TYPE:-1,INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50,MESSENGER_SHARE_SHEET:51,MESSENGER_COMMUNITY_TAB_UNJOINED_COMMUNITIES:52,MESSENGER_BCF_FREQUENTS:53,FB_ORIGINAL_PRIVATE_SHARING:54});f["default"]=a}),66);
__d("isSearchQualityEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("3283")}g["default"]=a}),98);
__d("seedUserInfo",["CurrentMessengerUser","I64","LSIntEnum","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("CurrentMessengerUser").getIDorEIMU();yield a._user_info.put({facebookUserId:(h||(h=d("I64"))).of_string(b),id:(i||(i=d("LSIntEnum"))).ofNumber(1)})});return j.apply(this,arguments)}g["default"]=a}),98);
__d("LSDefaultSyncGroups",["CurrentEnvironment","I64","LSE2EEMetadataSyncGroupUtils","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","MNetRankType","Promise","ReQL","asyncToGeneratorRuntime","gkx","isInstamadillo","isSearchQualityEnabled","qex","seedUserInfo"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new Set();d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()&&k.add(95);e=c("gkx")("5963")||c("isInstamadillo")();f=c("gkx")("5962");var l=d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroup();e=[{groupId:1,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:d("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel},{groupId:16,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},c("gkx")("4246")?null:{groupId:28,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel,syncParams:JSON.stringify(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncParams,{size_type:"wide"}))},{groupId:118,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:198},e?{groupId:89}:null,f?{groupId:197}:null];var m=[].concat(e,[{groupId:6},{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroupForIGDSyncGroup()]),n=[].concat(e,[{groupId:7,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").MESSENGER_USER_SEARCH,c("isSearchQualityEnabled")()?c("MNetRankType").MESSENGER_BLENDED_NULLSTATE:c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,c("MNetRankType").INBOX_ACTIVE_NOW,c("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE,c("MNetRankType").MESSENGER_BROADCAST_FLOW_TOP_THREADS,c("MNetRankType").BROADCAST_FLOW_TOP_CONTACTS]})},{groupId:15,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:12,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},{groupId:140},{groupId:141},{groupId:142},{groupId:143},{groupId:26},{groupId:196},{groupId:104,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},l,c("gkx")("24113")?{groupId:120,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel}:null,c("qex")._("136")||c("gkx")("24114")?{groupId:208}:null,c("gkx")("26390")?{groupId:6,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp}:null,{groupId:145,syncChannel:d("LSSyncGroupsUtils").defaultSyncGroup.syncChannel},c("gkx")("5985")?{groupId:202}:null]);function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.network_requests).getKeyRange(""))),f=e.map(function(a){a=a.syncDatabaseId;return(j||(j=d("LSIntEnum"))).toNumber(a)});return(h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b!=null&&(!f.includes(b.groupId)||k.has(b.groupId))&&(yield a.network_requests.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:(j||(j=d("LSIntEnum"))).ofNumber(b.groupId)})))});return function(a){return c.apply(this,arguments)}}()))});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.sync_groups)));return new Map(a.map(function(a){return[(j||(j=d("LSIntEnum"))).toNumber(a.groupId),a]}))});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield q(a));function f(a){return g.apply(this,arguments)}function g(){g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.groupId;b=babelHelpers.objectWithoutPropertiesLoose(b,["groupId"]);var f=e.get(c);f==null||k.has(c)?yield a.sync_groups.put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,b,{groupId:(j||(j=d("LSIntEnum"))).ofNumber(c)})):f!=null&&(f.syncParams!==b.syncParams||b.syncChannel!=null&&!(i||(i=d("I64"))).equal(f.syncChannel,b.syncChannel))&&(yield a.sync_groups.put(babelHelpers["extends"]({},f,{syncChannel:b.syncChannel!=null?b.syncChannel:f.syncChannel,syncParams:b.syncParams})))});return g.apply(this,arguments)}yield (h||(h=b("Promise"))).all(c.map(function(a){return a&&f(a)}))});return t.apply(this,arguments)}function u(a){return a!=null?a:c("CurrentEnvironment").instagramdotcom?m:n}function a(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=u(b);d("LSPlatformLsInitLog").addPoint("db_seed_start");yield c("seedUserInfo")(a);yield o(a,b);yield s(a,b);d("LSPlatformLsInitLog").addPoint("db_seed_end")});return v.apply(this,arguments)}g.e2eeMetadataSyncGroup=l;g.igdSyncGroups=m;g.defaultSyncGroups=n;g.seedDb=a}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("ReQL").fromTableAscending(a.cutover_threads);return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.cutover_threads["delete"](c.openThreadId)})},(h||(h=b("Promise"))).resolve())})}g.call=a}),98);
__d("UserTimingUtils",["performance","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=typeof (h||(h=c("performance"))).mark==="function"&&typeof (h||(h=c("performance"))).clearMarks==="function"&&typeof (h||(h=c("performance"))).measure==="function"&&typeof (h||(h=c("performance"))).clearMeasures==="function",j=!1;if(i&&(h||(h=c("performance"))).mark!=null){var k="__v3",l={};Object.defineProperty(l,"startTime",{get:function(){j=!0}});try{(h||(h=c("performance"))).mark(k,l)}catch(a){}finally{(h||(h=c("performance"))).clearMarks(k)}}function a(a){i&&(h||(h=c("performance"))).mark(a)}function d(a,b,d){d===void 0&&(d=!0);if(i){try{(h||(h=c("performance"))).measure(a,b)}catch(a){}d&&(h||(h=c("performance"))).clearMarks(b);(h||(h=c("performance"))).clearMeasures(a)}}function e(a){if(i){try{a=(h||(h=c("performance"))).getEntriesByName(a,"mark");if(a!=null&&a.length>0)return!0}catch(a){}return!1}}function f(a){if(i)try{(h||(h=c("performance"))).clearMarks(a)}catch(a){}}function m(a,b){if(j)try{(h||(h=c("performance"))).measure(a,b),h.clearMeasures(a)}catch(a){}}function n(a,b){j&&((h||(h=c("performance"))).mark(a,b),h.clearMarks(a))}function o(a,d){var e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=(h||(h=c("performance"))).now();i.next=3;return b("regeneratorRuntime").awrap(d());case 3:f=i.sent;g=(h||(h=c("performance"))).now();m(a,{end:g,start:e});return i.abrupt("return",f);case 7:case"end":return i.stop()}},null,this)}function p(a,b,c){}function q(a,b){}g.measureStart=a;g.measureEnd=d;g.hasMark=e;g.clearMarks=f;g.measureModern=m;g.markModern=n;g.asyncMeasure=o;g.measureReactCommit=p;g.measureReactPostCommit=q}),98);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","Promise","ReStoreDecryptionFailure","ReStoreEARSetupFailure","ReStoreIndexedDbClosedEvent","ReStoreIndexedDbFailToOpenEvent","ReStoreIndexedDbUpgradedEvent","ReStoreUnexpectedlyClosed","UserTimingUtils","asyncToGeneratorRuntime","cr:10755","cr:4440","cr:4489","cr:6218","cr:6244","cr:665","cr:7000","cr:7351","cr:7471","cr:8659","gkx","justknobx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:6218"))!=null?e:b("cr:10755"),k=(e=b("cr:7000"))!=null?e:b("cr:7351"),l=c("gkx")("24158")&&c("gkx")("24149");function m(a){if(a instanceof c("ReStoreIndexedDbUpgradedEvent")&&j!=null&&c("justknobx")._("1410"))c("promiseDone")(j.killSharedWorker(!0));else if(a instanceof c("ReStoreIndexedDbClosedEvent")){a=a.getError();b("cr:6244")!=null&&a instanceof(b("cr:6244")==null?void 0:b("cr:6244").ReStoreDbVersionChange)?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreDecryptionFailure").ReStoreDecryptionFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreEARSetupFailure").ReStoreEARSetupFailure?c("LSPlatformErrorChannel").emit(a):a instanceof d("ReStoreUnexpectedlyClosed").ReStoreUnexpectedlyClosed&&b("cr:4440")!=null?(b("cr:4440")==null?void 0:b("cr:4440").releaseIfExist(),c("LSPlatformErrorChannel").emit(a)):a instanceof c("ReStoreIndexedDbFailToOpenEvent")&&b("cr:4440")!=null&&(b("cr:4440")==null?void 0:b("cr:4440").releaseIfExist())}}var n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MessengerLogHistory").getInstance("db_init");c("promiseDone")(d("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(b){a.debug("Has multiple tabs: "+b),d("MultipleTabsLogger").addAnnotationToQPLEvent(c("qpl")._(25305590,"1127"))}));a.debug("====Creating DB====");d("LSPlatformLsInitLog").addPoint("vaulting_setup_start");b("cr:4489")!=null&&b("cr:665")!=null&&(a.debug("Vaulting setup started"),b("cr:665").setupMainWaLogger(),yield d("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield b("cr:4489").setupVaultMaterials()})),a.debug("Vaulting setup finished"));d("LSPlatformLsInitLog").addPoint("vaulting_setup_end");a.debug("Connecting to DB");var e=b("cr:8659")!=null?yield b("cr:8659")():yield b("cr:7471").createDB(m);a.debug("Connection established");yield e.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=l||k==null?[(i||(i=b("Promise"))).resolve(),(i||(i=b("Promise"))).resolve()]:[k.call(c),d("MAWDropCutoverThreadsTable").call(c)],f=e[0];e=e[1];yield (i||(i=b("Promise"))).all([f,e]);d("LSPlatformLsInitLog").addPoint("success_maw_data_deletion");a.debug("Seeding DB");yield d("LSDefaultSyncGroups").seedDb(c,void 0);a.debug("DB seeded")});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":122");a.debug("====DB created====");return e});return function(){return a.apply(this,arguments)}}(),o;function a(){o==null&&(o=(h||(h=c("ExecutionEnvironment"))).isInBrowser?n():new(i||(i=b("Promise")))(function(){}));return o}g.get=a}),98);
__d("MWConditionallySetupEBStateDB",["asyncToGeneratorRuntime","cr:6693","cr:8233"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(b("cr:6693")!=null){b("cr:8233")==null?void 0:b("cr:8233").setupMainWaLogger();a=(yield b("cr:6693").makeEBStateDB(a));return a}});return h.apply(this,arguments)}g.conditionallyMakeEBStateDB=a}),98);
__d("MWLSSchemaEphemeral",["FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","asyncToGeneratorRuntime","cr:8624"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("LSPlatformLsInitLog").addPoint("init_start");var e;try{a=(yield d("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB());a!=null&&(h.debug("Creating EB State DB"),e=d("LSReStoreWrapper").createLSReStore(a,d("LSMetadata").schema,[c("MAWLSVaultingHooks")],void 0,d("LSPlatformLsInitLog").lsInitLogger),yield b("cr:8624")==null?void 0:b("cr:8624")(e),h.debug("EB State DB inited"))}catch(a){c("FBLogger")("messenger_web_clients").catching(a).mustfix("EBSM failed")}e==null&&(h.debug("Creating EDB"),e=c("LSJSInMemoryStorage")(d("LSMetadata").schema),h.debug("EDB inited"));d("LSPlatformLsInitLog").addPoint("init_end");return e});return i.apply(this,arguments)}g.createDB=a}),98);/*FB_PKG_DELIM*/
__d("getChatJidForLSDBJid",["I64","LSMessagingThreadTypeUtil","ReQL","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b)));if(a!=null){b=(h||(h=d("I64"))).to_string(c);return d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?d("WAJids").toGroupJid(b):d("WAJids").toMsgrUserJid(b)}});return i.apply(this,arguments)}g.getMaybeChatJidForLSDBJid=a}),98);
__d("LSShimCompleteThreadCutover.nop",["I64","MAWBridgeFireAndForget","ReQL","asyncToGeneratorRuntime","getChatJidForLSDBJid"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.cutover_threads).getKeyRange(e)));if(b!=null){c=b.showOpenMessageHistory===!1;if(c)return[(h||(h=d("I64"))).one];c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(b.armadilloThreadId)));if(c!=null){b=(yield d("getChatJidForLSDBJid").getMaybeChatJidForLSDBJid(a,c.serverThreadKey,c.jid));if(b==null)return[(h||(h=d("I64"))).one];d("MAWBridgeFireAndForget").fireAndForget("backend","insertAdminMessageInCutoverThreads",{openThreadId:(h||(h=d("I64"))).to_string(e),threadJid:b,traceId:f});return[h.zero]}return[(h||(h=d("I64"))).one]}return[(h||(h=d("I64"))).one]});function c(b,c,d,e,f){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSCompleteThreadCutover",["LSShimCompleteThreadCutover.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.nativeOperation(b("LSShimCompleteThreadCutover.nop"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCompleteThreadCutoverStoredProcedure";e.exports=a}),null);
__d("LSDeleteBannersByIds",["LSArrayGetObjectAt"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.sequence([function(e){return d[1]=c.createArray(),d[2]=c.i64.of_int32(a[1].length),c.i64.gt(d[2],c.i64.cast([0,0]))?c.loopAsync(d[2],function(e){return d[4]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[4]).then(function(a){return a=a,d[5]=a[0],d[6]=a[1],a})},function(a){return d[7]=(d[1].push(c.i64.to_string(d[5])),d[1])}])}):c.resolve()},function(a){return d[3]=d[1].join(","),d[0]=d[3]}])},function(b){return c.forEach(c.filter(c.db.table(118).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&a[1].some(function(a){return c.i64.eq(b.bannerId,a)})}),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSInThreadBannerDeleteBannersByIdsStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertDeliverySetting",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(148).put({audience:a[0],deliverySetting:a[1],deliveryOptions:a[2],usernameToDeliverySetting:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertDeliverySettingStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertProactiveWarningSettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.db.table(183).put({threadKey:a[0],nextCheckTimestampMs:a[2],token:a[3],tag:a[4],storyLocation:a[5],entryPoint:a[6],context:a[7],suspectId:a[1]}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSProactiveWarningsDeleteThenInsertProactiveWarningSettingsStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertRankingRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(135).put({scoreType:a[0],requestId:a[1]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSRankingDeleteThenInsertRankingRequestStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertRankingScore",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(134).put({contactId:a[0],scoreType:a[1],contactType:a[2],score:a[3],scoreIndex:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSRankingDeleteThenInsertRankingScoreStoredProcedure";e.exports=a}),null);
__d("LSInsertDeliverySettingWarning",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSOmnistoreSettingsInsertDeliverySettingWarningStoredProcedure";e.exports=a}),null);
__d("LSSetBotResponseInfo",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[1]]],"messageId"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]}),function(b){var c=b.update;b.item;return c({botResponseId:a[2],metadataDataclass:a[3]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetBotResponseInfoStoredProcedure";e.exports=a}),null);
__d("LSTruncatePakeMessagesDatabase",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return a[0]?b.forEach(b.db.table(258).fetch(),function(a){return a["delete"]()}):b.forEach(b.db.table(258).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSPakeMessagesTruncatePakeMessagesDatabaseStoredProcedure";e.exports=a}),null);
__d("LSTruncatePinnedThreads",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(82).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncatePinnedThreadsStoredProcedure";e.exports=a}),null);
__d("LSUpsertFolder",["LSUpdateFolderThreadSnippet"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.i64.neq(a[3],void 0)?c.resolve(d[0]=a[3]):c.sequence([function(b){return c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[3]=c.i64.cast([0,0]):(b=a.item,d[3]=b.lastActivityTimestampMs)})},function(a){return d[0]=d[3]}])},function(b){return c.i64.neq(a[4],void 0)?c.resolve(d[1]=a[4]):c.sequence([function(b){return c.sortBy(c.filter(c.db.table(9).fetch([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.lt(b.lastReadWatermarkTimestampMs,b.lastActivityTimestampMs)}),[["lastReadWatermarkTimestampMs","ASC"]]).next().then(function(b,e){var f=b.done;b=b.value;return f?c.sequence([function(b){return c.i64.neq(a[3],void 0)?c.resolve(d[5]=a[3]):c.sequence([function(b){return c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]).next().then(function(b,e){var a=b.done;b=b.value;return a?d[6]=c.i64.cast([0,0]):(e=b.item,d[6]=e.lastActivityTimestampMs)})},function(a){return d[5]=d[6]}])},function(a){return d[3]=d[5]}]):(e=b.item,d[3]=e.lastReadWatermarkTimestampMs)})},function(a){return d[1]=d[3]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(b,e){e=b.done;b=b.value;return e?c.sequence([function(b){return c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,80]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:a[0],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,6]),threadName:a[1],folderName:"",parentThreadKey:c.i64.cast([0,0]),threadPictureUrl:a[2],lastActivityTimestampMs:d[0],lastReadWatermarkTimestampMs:d[1],removeWatermarkTimestampMs:c.i64.cast([0,0]),muteExpireTimeMs:c.i64.cast([0,0]),snippet:"",isAdminSnippet:!1,hasPersistentMenu:!1,disableComposerInput:!1,snippetHasEmoji:!1,authorityLevel:c.i64.cast([0,80]),ongoingCallState:c.i64.cast([0,0]),capabilities:c.i64.cast([0,0]),shouldRoundThreadPicture:!1})}]):(b.item,c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var e=b.update;b.item;return e({threadName:a[1],folderName:"",parentThreadKey:c.i64.cast([0,0]),threadPictureUrl:a[2],lastActivityTimestampMs:d[0],lastReadWatermarkTimestampMs:d[1],removeWatermarkTimestampMs:c.i64.cast([0,0]),muteExpireTimeMs:c.i64.cast([0,0]),snippet:"",snippetText:void 0,snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:!1,hasPersistentMenu:!1,disableComposerInput:!1,snippetHasEmoji:!1,authorityLevel:c.i64.cast([0,80]),ongoingCallState:c.i64.cast([0,0]),capabilities:c.i64.cast([0,0]),shouldRoundThreadPicture:!1})}))})},function(d){return c.storedProcedure(b("LSUpdateFolderThreadSnippet"),a[0],a[5],a[6])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpsertFolderStoredProcedure";e.exports=a}),null);
__d("LSIssueParticipantPointQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("table","14"),d[0].set("type",c.i64.cast([0,1])),d[0].set("1",a[0]),d[0].set("2",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ppq",c.i64.cast([0,17]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueParticipantPointQueryStoredProcedure";e.exports=a}),null);
__d("LSVerifyContactParticipantExist",["LSIssueNewTask","LSIssueParticipantPointQuery"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.db.table(7).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return d[2]=new c.Map(),d[2].set("contact_id",a[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.lt(b.authorityLevel,c.i64.cast([0,60]))}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],rank:0,profilePictureUrl:"",name:a[2],isMessengerUser:!1,isMemorialized:!1,contactType:c.i64.cast([0,1]),contactTypeExact:c.i64.cast([0,1]),blockedByViewerStatus:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,60]),workForeignEntityType:c.i64.cast([0,0]),contactViewerRelationship:c.i64.cast([0,0])})}]):(e.item,0)})},function(d){return c.filter(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])}).next().then(function(d,e){e=d.done;d=d.value;return e?c.storedProcedure(b("LSIssueParticipantPointQuery"),a[1],a[0]):(d.item,0)})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyContactParticipantExistStoredProcedure";e.exports=a}),null);
__d("LSExpandedStaticDependencies",["LSAppendDataTraceAddon","LSBeginHandlingFireForgetTasksForQueue","LSClearAllScreenTimeRecords","LSClearAllSupervisionEdgeRecords","LSClearAllSupervisionMetadataRecords","LSClearThreadLimits","LSCompleteThreadCutover","LSDeleteAllCmFbEventData","LSDeleteAllCommunityChannelCategories","LSDeleteAllCommunityFolders","LSDeleteAllDeliverySettingWarnings","LSDeleteAllPublicChatFbEventData","LSDeleteBannersByIds","LSDeleteThenInsertBotProfileInfoV2","LSDeleteThenInsertCmCommunityList","LSDeleteThenInsertContact","LSDeleteThenInsertDeliverySetting","LSDeleteThenInsertMessageRequest","LSDeleteThenInsertMessagingPrivacySettings","LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot","LSDeleteThenInsertProactiveWarningSettings","LSDeleteThenInsertRankingRequest","LSDeleteThenInsertRankingScore","LSDeleteThenInsertThread","LSEncryptedBackupsStatusTriggerUpsert","LSEpdCookieSettingsUpsert","LSExecuteFinallyBlockForSyncTransaction","LSExecuteFirstBlockForSyncTransaction","LSGroupRoomTruncate","LSInsertDeliverySettingWarning","LSIssueNextSync","LSMailboxTaskCompletionApiOnTaskCompletion","LSMarkBumpedThreadsSeen","LSMarkFolderSeen","LSPopulateCommunityFolderData","LSRemoveTask","LSReportAppState","LSRoomTruncate","LSSerializeTask","LSSetBotResponseInfo","LSSetMessageTextHasLinks","LSSetRegionHint","LSStoreProjectConfiguration","LSStoryContactSyncFromBucket","LSTaskExists","LSTruncateCommunityListTable","LSTruncateFeatureLimits","LSTruncateNotificationSettings","LSTruncatePakeMessagesDatabase","LSTruncatePinnedThreads","LSTruncateQuietTime","LSTruncateReachabilitySettings","LSUpdateCommunityThreadStaleState","LSUpdateLastSyncCompletedTimestampMsToNow","LSUpdateOrInsertCommunitySurfaceRange","LSUpdateOrInsertOhaiGatewayKeyConfigs","LSUpsertFolder","LSUpsertGradientColor","LSUpsertSequenceId","LSUpsertTheme","LSVerifyAndSaveNewCredentials","LSVerifyContactParticipantExist","LSVerifyContactRowExists","LSVerifyE2EEMetadataThreadExistsV2","LSVerifyThreadExists","LSVerifyThreadRowExists"],(function(a,b,c,d,e,f,g){"use strict";a={appendDataTraceAddon:c("LSAppendDataTraceAddon"),beginHandlingFireForgetTasksForQueue:c("LSBeginHandlingFireForgetTasksForQueue"),clearAllScreenTimeRecords:c("LSClearAllScreenTimeRecords"),clearAllSupervisionEdgeRecords:c("LSClearAllSupervisionEdgeRecords"),clearAllSupervisionMetadataRecords:c("LSClearAllSupervisionMetadataRecords"),clearThreadLimits:c("LSClearThreadLimits"),completeThreadCutover:c("LSCompleteThreadCutover"),deleteAllCmFbEventData:c("LSDeleteAllCmFbEventData"),deleteAllCommunityChannelCategories:c("LSDeleteAllCommunityChannelCategories"),deleteAllCommunityFolders:c("LSDeleteAllCommunityFolders"),deleteAllDeliverySettingWarnings:c("LSDeleteAllDeliverySettingWarnings"),deleteAllPublicChatFbEventData:c("LSDeleteAllPublicChatFbEventData"),deleteBannersByIds:c("LSDeleteBannersByIds"),deleteThenInsertBotProfileInfoV2:c("LSDeleteThenInsertBotProfileInfoV2"),deleteThenInsertCmCommunityList:c("LSDeleteThenInsertCmCommunityList"),deleteThenInsertContact:c("LSDeleteThenInsertContact"),deleteThenInsertDeliverySetting:c("LSDeleteThenInsertDeliverySetting"),deleteThenInsertMessageRequest:c("LSDeleteThenInsertMessageRequest"),deleteThenInsertMessagingPrivacySettings:c("LSDeleteThenInsertMessagingPrivacySettings"),deleteThenInsertNotificationsSettingsGraphQLSnapshot:c("LSDeleteThenInsertNotificationsSettingsGraphQLSnapshot"),deleteThenInsertProactiveWarningSettings:c("LSDeleteThenInsertProactiveWarningSettings"),deleteThenInsertRankingRequest:c("LSDeleteThenInsertRankingRequest"),deleteThenInsertRankingScore:c("LSDeleteThenInsertRankingScore"),deleteThenInsertThread:c("LSDeleteThenInsertThread"),encryptedBackupsStatusTriggerUpsert:c("LSEncryptedBackupsStatusTriggerUpsert"),epdCookieSettingsUpsert:c("LSEpdCookieSettingsUpsert"),executeFinallyBlockForSyncTransaction:c("LSExecuteFinallyBlockForSyncTransaction"),executeFirstBlockForSyncTransaction:c("LSExecuteFirstBlockForSyncTransaction"),groupRoomTruncate:c("LSGroupRoomTruncate"),insertDeliverySettingWarning:c("LSInsertDeliverySettingWarning"),issueNextSync:c("LSIssueNextSync"),mailboxTaskCompletionApiOnTaskCompletion:c("LSMailboxTaskCompletionApiOnTaskCompletion"),markBumpedThreadsSeen:c("LSMarkBumpedThreadsSeen"),markFolderSeen:c("LSMarkFolderSeen"),populateCommunityFolderData:c("LSPopulateCommunityFolderData"),removeTask:c("LSRemoveTask"),reportAppState:c("LSReportAppState"),roomTruncate:c("LSRoomTruncate"),serializeTask:c("LSSerializeTask"),setBotResponseInfo:c("LSSetBotResponseInfo"),setMessageTextHasLinks:c("LSSetMessageTextHasLinks"),setRegionHint:c("LSSetRegionHint"),storeProjectConfiguration:c("LSStoreProjectConfiguration"),storyContactSyncFromBucket:c("LSStoryContactSyncFromBucket"),taskExists:c("LSTaskExists"),truncateCommunityListTable:c("LSTruncateCommunityListTable"),truncateFeatureLimits:c("LSTruncateFeatureLimits"),truncateNotificationSettings:c("LSTruncateNotificationSettings"),truncatePakeMessagesDatabase:c("LSTruncatePakeMessagesDatabase"),truncatePinnedThreads:c("LSTruncatePinnedThreads"),truncateQuietTime:c("LSTruncateQuietTime"),truncateReachabilitySettings:c("LSTruncateReachabilitySettings"),updateCommunityThreadStaleState:c("LSUpdateCommunityThreadStaleState"),updateLastSyncCompletedTimestampMsToNow:c("LSUpdateLastSyncCompletedTimestampMsToNow"),updateOrInsertCommunitySurfaceRange:c("LSUpdateOrInsertCommunitySurfaceRange"),updateOrInsertOhaiGatewayKeyConfigs:c("LSUpdateOrInsertOhaiGatewayKeyConfigs"),upsertFolder:c("LSUpsertFolder"),upsertGradientColor:c("LSUpsertGradientColor"),upsertSequenceId:c("LSUpsertSequenceId"),upsertTheme:c("LSUpsertTheme"),verifyAndSaveNewCredentials:c("LSVerifyAndSaveNewCredentials"),verifyContactParticipantExist:c("LSVerifyContactParticipantExist"),verifyContactRowExists:c("LSVerifyContactRowExists"),verifyE2EEMetadataThreadExistsV2:c("LSVerifyE2EEMetadataThreadExistsV2"),verifyThreadExists:c("LSVerifyThreadExists"),verifyThreadRowExists:c("LSVerifyThreadRowExists")};b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("MAWCentralizedThreadUpdateReq",["FBLogger","MAWDexieTable"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function a(a,b,e){switch(e.type){case"add":return d("MAWDexieTable").dexieResolve({type:"bulkAdd",values:e.values,valuesBefore:[]});case"put":return i(a,b,{keys:e.values.map(function(a){return a.rowId}),trans:e.trans}).then(function(a){return{type:"bulkPut",values:e.values,valuesBefore:a}});case"delete":return i(a,b,e).then(function(a){return{type:"bulkDelete",values:[],valuesBefore:a}});case"deleteRange":e.range.type!==h&&c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("Unexpected deleteRange call, object:"+JSON.stringify(e.range));return d("MAWDexieTable").dexieResolve({type:"deleteRange",values:[],valuesBefore:[]})}}function b(a,b,e){switch(e.type){case"add":case"put":return d("MAWDexieTable").dexieResolve(e.values.map(function(a){return a.threadJid}));case"delete":return i(a,b,e).then(function(a){return a.map(function(a){return a.threadJid})});case"deleteRange":e.range.type!==h&&c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("Unexpected deleteRange call, object:"+JSON.stringify(e.range));return d("MAWDexieTable").dexieResolve([])}}function i(a,b,c){var d=c.keys;c=c.trans;return a.table(b).getMany({keys:d,trans:c}).then(function(a){return a.filter(Boolean)})}g.parseDexieMutateRequest=a;g.parseDexieMutateRequestForThrottle=b}),98);
__d("MAWDbMessageHandler",["MAWAckLevel","MAWDbThreadBumpMiddlewareUtils","MAWDbThreadTxns","MAWDexieTable","MAWThreadUpdateType","MAWTransactionMode","MAWTransactor","MAWUpdateThreadBumpTimestamp","WAOdsEnums","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWTransactor").makeMsgrTransactor({groupInfo:(a=d("MAWTransactionMode")).READONLY,messages:a.READONLY,reactions:a.READONLY,threads:a.READONLY},"updateThreadForMessages",function(a){return function(b){switch(b.type){case"bulkAdd":case"bulkPut":return i(a,b.values,b.valuesBefore);case"bulkDelete":return h(a,b.valuesBefore);case"deleteRange":break;default:b.type;break}return d("MAWDexieTable").dexieResolve()}});function h(a,b){b=Array.from(new Set(b.map(function(a){return a.threadJid})));b=b.map(function(b){var e=d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;return d("MAWDbThreadTxns").getThread(a,b).then(function(f){if(!f.success)throw c("err")("[MAWDbMessageHandler] thread not found"+b);return d("MAWUpdateThreadBumpTimestamp").updateThreadViaCentralizedThreadUpdate({bumpMsgOrReaction:null,db:a,odsBumpParams:{entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"$MAWDbMessageHandlerDelete"},thread:f.value,threadUpdateType:e}).then(c("emptyFunction"))})});return d("MAWDexieTable").dexieAll(b).then(c("emptyFunction"))}function i(a,b,e){b=d("MAWDbThreadBumpMiddlewareUtils").createThreadUpdateInfoWithoutSnippetMsgFromInsertedMsgs(b);b=Array.from(b.entries()).map(function(b){var f=b[0];b=b[1];var g=b.bumpMsg,h=b.threadUpdateType;return d("MAWDbThreadTxns").getThread(a,f).then(function(b){if(!b.success)throw c("err")("[MAWDbMessageHandler] thread not found"+f);return d("MAWUpdateThreadBumpTimestamp").updateThreadViaCentralizedThreadUpdate({bumpMsgOrReaction:g,db:a,odsBumpParams:{entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"$MAWDbMessageHandlerInsert"},sentByLocalDevice:j(g,e),thread:b.value,threadUpdateType:h}).then(c("emptyFunction"))})});return d("MAWDexieTable").dexieAll(b).then(c("emptyFunction"))}function j(a,b){if(a==null)return!1;b=b.find(function(b){return b.rowId===a.rowId});return b!=null&&!d("MAWAckLevel").isMsgAuthoritative(b.ack)&&d("MAWAckLevel").isMsgAuthoritative(a.ack)}g.updateThreadForMessages=b}),98);
__d("MAWDbReactionHandlerUtils",["MAWDbReaction","MAWThreadNewestMsgOrReactionUtils","MAWThreadUpdateType","MAWUpdateThreadBumpTimestamp","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return(a==null?void 0:a.reaction)==null},i=function(a){return a.reaction!=null};e=function(a){return a.rowId};f=function(a,b){return d("MAWDbReaction").getReactionTimeMs(b)-d("MAWDbReaction").getReactionTimeMs(a)};function j(a){var b=k(a.reactToAuthor);a=!k(a.author);return b&&a}function k(a){return a===d("WAJids").AUTHOR_ME||a===d("WAGlobals").getMyUserJid()}var l=function(a){return a.reduce(function(a,b){var c;c=(c=a.get(b.threadJid))!=null?c:[];c.push(b);return a.set(b.threadJid,c)},new Map())};function a(a,b){var c=b.bumpMsgOrReaction,e=b.db,f=b.thread;b=b.unbumpTrigger;return d("MAWUpdateThreadBumpTimestamp").updateThreadViaCentralizedThreadUpdate({bumpMsgOrReaction:c,db:e,odsBumpParams:{entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"$MAWDbReactionHandler-"+(a==="bumped"?"Bump":"Unbump")},thread:f,threadUpdateType:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD,unbumpTrigger:b})}function b(a){var b=a.values;a=a.valuesBefore;var c=a.reduce(function(a,b){return b!=null?a.set(b.rowId,b):a},new Map()),d=new Map();b.forEach(function(a){if(i(a))d.set(a,"addedReaction");else if(h(a)){a=c.get(a.rowId);a!=null&&i(a)&&d.set(a,"removedReaction")}});return{mapReactionToUpdate:d,reactions:Array.from(d.keys())}}function c(a,b){return d("MAWThreadNewestMsgOrReactionUtils").getNewestReactionToNonNullMsg(a,b.filter(j)).then(function(a){a=a.newestReaction;return a})}g.isRemovedReaction=h;g.isAddedReaction=i;g.toRowId=e;g.sortReactionsByNewest=f;g.canReactionBumpThread=j;g.groupReactionsByThread=l;g.updateThreadForReactionViaCentralizedThreadUpdate=a;g.parseReactionUpdates=b;g.getNewestReactionInMutationForBump=c}),98);
__d("MAWDbReactionHandler",["MAWDbReaction","MAWDbReactionHandlerUtils","MAWDbThreadBumpMiddlewareUtils","MAWDbThreadTxns","MAWDexieTable","MAWThreadNewestMsgOrReactionUtils","MAWThreadUpdateMiddlewareGKUtil","MAWTransactionMode","MAWTransactor","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";b=d("MAWTransactor").makeMsgrTransactor({groupInfo:(a=d("MAWTransactionMode")).READONLY,messages:a.READONLY,reactions:a.READONLY,threads:a.READONLY},"updateThreadForReactions",function(a){return function(b){if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForReactions())return d("MAWDexieTable").dexieResolve();b=d("MAWDbReactionHandlerUtils").parseReactionUpdates(b);var e=b.mapReactionToUpdate;b=b.reactions;b=Array.from(d("MAWDbReactionHandlerUtils").groupReactionsByThread(b)).map(function(b){var f=b[0];b=b[1];return d("MAWDexieTable").dexieAll([d("MAWDbThreadTxns").getThread(a,f),d("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForBump(a,f),d("MAWDbReactionHandlerUtils").getNewestReactionInMutationForBump(a,b)]).then(function(b){var g=b[0],h=b[1];b=b[2];if(g.success===!1)throw c("err")("[MAWDbReactionHandler] thread not found"+f);if(h==null||b==null)return;if(d("MAWDbReaction").getReactionTimeMs(b)<d("MAWDbThreadBumpMiddlewareUtils").getMsgOrReactionTimeMs(h))return;h={bumpMsgOrReaction:h,db:a,thread:g.value};switch(e.get(b)){case"addedReaction":return d("MAWDbReactionHandlerUtils").updateThreadForReactionViaCentralizedThreadUpdate("bumped",h);case"removedReaction":return d("MAWDbReactionHandlerUtils").updateThreadForReactionViaCentralizedThreadUpdate("unbumped",babelHelpers["extends"]({},h,{unbumpTrigger:b}));default:throw c("err")("[MAWDbReactionHandler] invalid mutation type")}})});return d("MAWDexieTable").dexieAll(b).then(c("emptyFunction"))}});g.updateThreadForReactions=b}),98);
__d("MAWThrottleThreadUpdate",["MAWDbThreadBumpMiddlewareUtils","MAWDbThreadTxns","MAWDexie","MAWDexieTable","MAWGetThreadUpdateType","MAWIndexedDb","MAWThreadNewestMsgOrReactionUtils","MAWTransactionMode","MAWTransactor","MAWUpdateThreadBumpTimestamp","WAGlobals","WAJids","WALogger","WAOdsEnums","justknobx","uniqueArray"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWCentralizedThreadUpdate][Throttled]: thread not found for jid ",""]);h=function(){return a};return a}var i=c("justknobx")._("2759"),j=new Set(),k=new Set();a=function(){j.clear(),k.clear()};b=function(a){a=c("uniqueArray")(a);a.forEach(function(a){n(a)?(j.add(a),l(a)):k.add(a)})};var l=function(a){c("MAWDexie").currentTransaction==null?void o(a):d("MAWIndexedDb").afterTransactionEffect(function(){return void o(a)}),k["delete"](a),m(a)},m=function(a){window.setTimeout(function(){k.has(a)?l(a):j["delete"](a)},i)},n=function(a){return!j.has(a)},o=d("MAWTransactor").makeMsgrTransactor({groupInfo:(e=d("MAWTransactionMode")).READONLY,messages:e.READONLY,reactions:e.READONLY,threads:e.READONLY},"updateThreadsForJidsDuringThrottle",function(a){return function(b){return d("MAWDexieTable").dexieAll([d("MAWDbThreadTxns").getThread(a,b),d("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForBump(a,b)]).then(function(c){var e=c[0];c=c[1];if(e.success===!1||e.value==null){d("WALogger").WARN(h(),b);return}d("MAWUpdateThreadBumpTimestamp").updateThreadViaCentralizedThreadUpdate({bumpMsgOrReaction:c,db:a,isThrottled:!0,odsBumpParams:{entity:d("WAOdsEnums").Entity.MAW_THREAD_UPDATE_MIDDLEWARE,key:"$MAWDbThrottledHandler"},sentByLocalDevice:d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(c,{forMessage:function(a){return d("WAJids").isAuthorMe(a.author)||a.author===d("WAGlobals").getMyUserJid()},forNull:function(){return!1},forReaction:function(){return!1}}),thread:e.value,threadUpdateType:d("MAWGetThreadUpdateType").getThreadUpdateTypeForMsgOrReaction(c)})})}});g.clearCacheForThreadUpdateThrottle=a;g.throttleThreadUpdates=b;g.updateThreadWithJid=l}),98);
__d("MAWGetThreadSnippetAndTimestampMiddleware",["FBLogger","MAWCentralizedThreadUpdateReq","MAWDbMessageHandler","MAWDbObjEncryption","MAWDbReactionHandler","MAWDbThreadBumpMiddlewareUtils","MAWDexieTable","MAWIndexedDb","MAWThreadUpdateMiddlewareGKUtil","MAWThrottleThreadUpdate","performance"],(function(a,b,c,d,e,f,g){"use strict";var h,i=["messages","reactions"];function j(a,b,e){var f=a.table(b);return!i.includes(b)?f:babelHelpers["extends"]({},f,{mutate:function(g){if(d("MAWIndexedDb").getDbStatus()!=="ready")return f.mutate(g);if(d("MAWThreadUpdateMiddlewareGKUtil").isThrottledUpdatesEnabled())return d("MAWCentralizedThreadUpdateReq").parseDexieMutateRequestForThrottle(a,b,g).then(function(a){return f.mutate(g).then(function(b){d("MAWThrottleThreadUpdate").throttleThreadUpdates(a);return b})});var i=(h||(h=c("performance"))).now();return d("MAWCentralizedThreadUpdateReq").parseDexieMutateRequest(a,b,g).then(function(a){var j=(h||(h=c("performance"))).now(),k=d("MAWDbThreadBumpMiddlewareUtils").getMessageTypesFromValues(a.values);c("FBLogger")("MAWCentralizedThreadUpdate").warn("[MAWGetSnippetAndTimestampMiddleware] Request pre-processing took %s ms for %s type of request with %s values",j-i,a.type,JSON.stringify(k));return f.mutate(g).then(function(c){d("MAWIndexedDb").afterTransactionEffect(function(){var c=babelHelpers["extends"]({},g);c.values!=null&&(c.values=c.values.map(function(a){return d("MAWDbObjEncryption").decryptDbObj(a,b,e)}));b==="messages"&&d("MAWDexieTable").dexieResolve(d("MAWDbMessageHandler").updateThreadForMessages(a));b==="reactions"&&d("MAWDexieTable").dexieResolve(d("MAWDexieTable").dexieResolve(d("MAWDbReactionHandler").updateThreadForReactions(a)))});return c})})["catch"](function(a){c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("[MAWGetSnippetAndTimestampMiddleware] Request pre-processing failed. Failed to use CentralizedThreadUpdate middleware for this request %s",a.message);return f.mutate(g)})}})}function a(a){return{create:function(b){try{return babelHelpers["extends"]({},b,{table:function(c){return j(b,c,a)}})}catch(a){c("FBLogger")("MAWCentralizedThreadUpdate").catching(a).mustfix("Error applying Thread Update Middleware");return b}},name:"MAWGetThreadSnippetAndTimestampMiddleware",stack:"dbcore"}}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSClearMessagePlaceholderRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(13).fetch([[[a[0],b.i64.cast([0,0])]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.minMessageId===a[1]&&b.i64.eq(b.i64.cast([0,0]),c.minTimestampMs)&&b.i64.eq(a[2],c.maxTimestampMs)}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearMessagePlaceholderRangeStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertMessageRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(34).put({threadKey:a[0],messageRequestStatus:a[2]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertMessageRequestStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(9).fetch([[[a[7]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:a[56],isDisappearingMode:a[57],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],threadStatus:a[83],threadSubtype:a[84],pauseThreadTimestamp:a[85],metadata:a[86],syncSource:a[87]}):(e=d.item,c[1]=e.lastActivityTimestampMs,c[3]=e.parentThreadKey,c[2]=e.disappearingThreadKey,c[4]=e.isDisappearingMode,b.i64.le(e.authorityLevel,a[6])?b.i64.gt(c[1],a[0])&&b.i64.neq(c[2],void 0)?(b.i64.eq(a[35],b.i64.cast([-1,4294967286]))&&b.i64.eq(c[3],b.i64.cast([0,0]))?(f=[c[3],e.folderName],c[5]=f[0],c[6]=f[1],f):(d=[a[35],a[10]],c[5]=d[0],c[6]=d[1],d),b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:e.lastReadWatermarkTimestampMs,authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:c[6],ongoingCallState:a[29],parentThreadKey:c[5],lastActivityTimestampMs:c[1],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],threadStatus:a[83],threadSubtype:a[84],pauseThreadTimestamp:a[85],metadata:a[86],syncSource:a[87]})):b.db.table(9).put({threadKey:a[7],lastReadWatermarkTimestampMs:a[1],authorityLevel:a[6],mailboxType:a[8],threadType:a[9],folderName:a[10],ongoingCallState:a[29],parentThreadKey:a[35],lastActivityTimestampMs:a[0],snippet:a[2],threadName:a[3],threadPictureUrl:a[4],needsAdminApprovalForNewParticipant:a[5],threadPictureUrlFallback:a[11],threadPictureUrlExpirationTimestampMs:a[12],removeWatermarkTimestampMs:a[13],muteExpireTimeMs:a[14],muteCallsExpireTimeMs:a[15],groupNotificationSettings:a[16],isAdminSnippet:a[17],snippetSenderContactId:a[18],snippetText:a[20],snippetStringHash:a[21],snippetStringArgument1:a[22],snippetAttribution:a[23],snippetAttributionStringHash:a[24],disappearingSettingTtl:a[25],disappearingSettingUpdatedTs:a[26],disappearingSettingUpdatedBy:a[27],cannotReplyReason:a[30],customEmoji:a[31],customEmojiImageUrl:a[32],outgoingBubbleColor:a[33],themeFbid:a[34],nullstateDescriptionText1:a[36],nullstateDescriptionType1:a[37],nullstateDescriptionText2:a[38],nullstateDescriptionType2:a[39],nullstateDescriptionText3:a[40],nullstateDescriptionType3:a[41],snippetHasEmoji:a[42],hasPersistentMenu:a[43],disableComposerInput:a[44],cannotUnsendReason:a[45],viewedPluginKey:a[46],viewedPluginContext:a[47],clientThreadKey:a[48],capabilities:a[49],shouldRoundThreadPicture:a[50],proactiveWarningDismissTime:a[51],isCustomThreadPicture:a[52],otidOfFirstMessage:a[53],normalizedSearchTerms:a[54],additionalThreadContext:a[55],disappearingThreadKey:c[2],isDisappearingMode:c[4],disappearingModeInitiator:a[58],unreadDisappearingMessageCount:a[59],lastMessageCtaId:a[61],lastMessageCtaType:a[62],consistentThreadFbid:a[63],threadDescription:a[64],unsendLimitMs:a[65],syncGroup:a[66],threadInvitesEnabled:a[67],threadInviteLink:a[68],numUnreadSubthreads:a[69],subthreadCount:a[70],threadInvitesEnabledV2:a[71],joinRequestApprovalSetting:a[72],pendingJoinRequestsCount:a[73],eventStartTimestampMs:a[74],eventEndTimestampMs:a[75],takedownState:a[76],memberCount:a[77],admodCount:a[78],secondaryParentThreadKey:a[79],igFolder:a[80],inviterId:a[81],threadTags:a[82],threadStatus:a[83],threadSubtype:a[84],pauseThreadTimestamp:a[85],metadata:a[86],syncSource:a[87]}):b.resolve())})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThenInsertThreadStoredProcedure";e.exports=a}),null);
__d("LSGetCursor",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(1).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=void 0:(b=a.item,c[0]=b.currentCursor)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreGetCursorStoredProcedure";e.exports=a}),null);
__d("LSGetViewerFBID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(4).fetch([[[b.i64.cast([0,1])]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([-1,4294967295]):(d=a.item,c[0]=d.facebookUserId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreGetViewerFBIDStoredProcedure";e.exports=a}),null);
__d("LSInsertNewMessageRange",["LSClearMessagePlaceholderRange"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSClearMessagePlaceholderRange"),a[0],a[9],c.i64.cast([0,0]))},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[5]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[5])&&c.i64.ge(b.maxTimestampMs,a[5])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[1],a[3],a[7]],d[0]=e[0],d[1]=e[1],d[2]=e[2],e):(c=b.item,e=[c.minTimestampMs,c.minMessageId,c.hasMoreBefore],d[0]=e[0],d[1]=e[1],d[2]=e[2],e)})},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[6])&&c.i64.ge(b.maxTimestampMs,a[6])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[2],a[4],a[8]],d[4]=e[0],d[5]=e[1],d[6]=e[2],e):(c=b.item,e=[c.maxTimestampMs,c.maxMessageId,c.hasMoreAfter],d[4]=e[0],d[5]=e[1],d[6]=e[2],e)})},function(b){return c.forEach(c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.ge(a[6],b.minTimestampMs)&&c.i64.le(a[5],b.maxTimestampMs)}),function(a){return a["delete"]()})},function(b){return c.db.table(13).put({threadKey:a[0],minTimestampMs:d[0],minMessageId:d[1],maxTimestampMs:d[4],maxMessageId:d[5],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:d[2],hasMoreAfter:d[6]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxInsertNewMessageRangeStoredProcedure";e.exports=a}),null);
__d("LSIssueNewTask",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return c[0]=b.i64.cast([0,0]),c[1]=b.i64.of_float(Date.now()),b.db.table(2).add({taskId:void 0,queueName:a[0],context:b.i64.to_string(a[1]),taskValue:a[2],enqueueTimestampMs:c[1],httpUrlOverride:a[3],timeoutTimestampMs:a[4],pluginType:a[5],priority:a[6],syncGroupId:a[7],transportKey:a[8],minTimeToSyncTimestampMs:a[9],taskDispatchPriority:c[0]})},function(d){return b.filter(b.db.table(2).fetchDesc([[[a[0]]],"queueNameTaskId"]),function(c){return c.queueName===a[0]&&c.context===b.i64.to_string(a[1])&&c.taskValue===a[2]}).next().then(function(a,d){var e=a.done;a=a.value;return e?c[2]=b.i64.cast([-1,4294967295]):(d=a.item,c[2]=d.taskId)})},function(a){return function(a){b.logger(a).info(a)}(["LightSpeed NewTask"," ",b.i64.to_string(c[2])].join(""))}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSCoreIssueNewTaskStoredProcedure";e.exports=a}),null);
__d("LSIssueNewTaskAndGetTaskID",["LSIssueNewTask","LSLogEventAnnotate.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(d){return c.storedProcedure(b("LSIssueNewTask"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10])},function(b){return d[3]=c.i64.to_string(a[1]),c.filter(c.db.table(2).fetchDesc([[[a[0]]],"queueNameTaskId"]),function(b){return b.queueName===a[0]&&b.context===d[3]&&b.taskValue===a[2]}).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([-1,4294967295]):(b=a.item,d[0]=b.taskId)})},function(e){return d[2]=new c.Map(),d[2].set("task_id",d[0]),d[2].set("task_queue_name",a[0]),d[2].set("task_label",d[3]),c.nativeOperation(b("LSLogEventAnnotate.nop"),c.i64.cast([0,16]),c.i64.cast([0,23]),c.i64.cast([0,0]),d[2])},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskAndGetTaskIDStoredProcedure";e.exports=a}),null);
__d("LSUpsertSequenceId",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(25).put({id:d[0],lastAppliedMailboxSequenceId:a[0]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpsertSequenceIdStoredProcedure";e.exports=a}),null);
__d("LSVerifyContactRowExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(e){var f=e.done;e.value;return f?c.sequence([function(b){return d[0]=a[3]==null?"":a[3],c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.lt(b.authorityLevel,a[14])}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],profilePictureUrl:a[2]==null?"":a[2],profilePictureFallbackUrl:a[5],name:d[0],secondaryName:a[20],normalizedNameForSearch:d[0],isMemorialized:a[9],blockedByViewerStatus:a[11],canViewerMessage:a[12],profilePictureLargeUrl:"",isMessengerUser:!0,rank:0,contactType:a[4],contactTypeExact:c.i64.cast([0,0]),requiresMultiway:!1,authorityLevel:a[14],workForeignEntityType:c.i64.cast([0,0]),capabilities:a[15],capabilities2:a[16],contactViewerRelationship:a[19],gender:a[18],firstName:a[21]})},function(e){return d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}]):0})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSContactVerifyContactRowExistsStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("BaseHovercardTriggerWrapper.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={displayInlineBlock:{display:"x1rg5ohu",$$css:!0}};function a(a){var b=a.display;a=babelHelpers.objectWithoutPropertiesLoose(a,["display"]);return b==="inline"?j.jsx("span",babelHelpers["extends"]({},a,{className:"xt0psk2"})):j.jsx("div",babelHelpers["extends"]({},a,{className:(h||(h=c("stylex")))(b==="inline-block"&&k.displayInlineBlock)}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("BaseNestedHovercardContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);c=b;g["default"]=c}),98);
__d("BaseSuppressHovercards",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=i.createContext(!1);function a(a){a=a.children;return i.jsx(k.Provider,{value:!0,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.BaseSuppressHovercardsContext=k;g.BaseSuppressHovercardsProvider=a;g.useIsHovercardSuppressed=b}),98);
__d("HovercardInteractionPreference",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({DISABLED:1,ENABLED_ON_HOVER:2,ENABLED_ON_CLICK:3});c=a;f["default"]=c}),66);
__d("CometHovercardSettingsContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({hovercardInteractionPreference:2,setHovercardInteractionPreference:c("emptyFunction"),shouldShowHovercardNUX:!1});g["default"]=b}),98);
__d("useBaseHovercardTrigger",["BaseContextualLayer.react","BaseHovercardTriggerWrapper.react","CometErrorBoundary.react","CometHeroInteractionContextPassthrough.react","CometPlaceholder.react","FocusInertRegion.react","FocusWithinHandler.react","HiddenSubtreeContextProvider.react","clearTimeout","focusScopeQueries","react","setTimeout","stylex","useCometDisplayTimingTrackerForInteraction","useCometPrerenderer","useDelayedState","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState,o=300,p=100,q={disablePointerEvents:{pointerEvents:"x47corl",$$css:!0},hovercard:{opacity:"xg01cxk",transitionDuration:"x1ebt8du",transitionProperty:"x19991ni",transitionTimingFunction:"x1dhq9h",$$css:!0},hovercardVisible:{opacity:"x1hc1fzr",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",$$css:!0}};function a(a){var b=a.children,e=a.display,f=a.fallback,g=a.onLoadEntryPoint,i=a.onVisibilityChange,r=a.showDelay,s=babelHelpers.objectWithoutPropertiesLoose(a,["children","display","fallback","onLoadEntryPoint","onVisibilityChange","showDelay"]);a=c("useDelayedState")(!1);var t=a[0],u=a[1];a=n(!1);var v=a[0],w=a[1];a=n(!1);var x=a[0],y=a[1];a=n(!1);var z=a[0],A=a[1];a=n(!1);var B=a[0],C=a[1],D=z&&B&&!x,E=m(null),F=m(null),G=m(null),H=c("useCometDisplayTimingTrackerForInteraction")("HoverCard"),I=k(function(){u(!1),w(!1),y(!0)},[u]),J=k(function(a){a.key==="Escape"&&I()},[I]),K=t||v||D,L=m(K);l(function(){L.current!==K&&(i&&i(K)),L.current=K},[K,i]);a=c("useFadeEffect")(K);var M=a[0],N=a[1],O=a[2];z=c("useCometPrerenderer")("tooltip",K);B=z[0].shouldPrerender;var P=B===void 0?!1:B,Q=z[1],R=z[2],S=k(function(){g&&g()},[g]),T=function(a){if(t)c("clearTimeout")(E.current);else{var b;u(!0,(b=r)!=null?b:o);S()}!D&&!v&&Q(a)},U=function(){E.current=c("setTimeout")(function(){u(!1)},p),R()},V=function(){w(!1)},W=function(){w(!1)},X=function(){v||(w(!0),S())},Y=function(){y(!1),S()};x=function(a){return j.jsxs(c("BaseHovercardTriggerWrapper.react"),{display:e,onKeyDown:J,onMouseEnter:T,onMouseLeave:U,onTouchCancel:V,onTouchEnd:W,onTouchStart:X,children:[j.jsx(c("FocusWithinHandler.react"),{onFocusChange:A,onFocusVisibleChange:C,onFocusWithin:Y,children:b(F)}),(D||v||P||M)&&j.jsx(c("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"HovercardTriggerPopover",children:j.jsx(c("BaseContextualLayer.react"),babelHelpers["extends"]({align:"middle",contextRef:F,hidden:!K&&P,imperativeRef:G,ref:H,xstyle:!K&&M?q.disablePointerEvents:void 0},s,{children:j.jsx(c("HiddenSubtreeContextProvider.react"),{isHidden:!K&&P,children:j.jsx("div",{className:(h||(h=c("stylex")))(q.hovercard,N&&q.hovercardVisible),ref:O,children:j.jsx(c("FocusInertRegion.react"),{focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:f!=null?j.jsx(c("CometPlaceholder.react"),{fallback:f,children:a}):a})})})}))})})})]})};return[x,I]}g["default"]=a}),98);
__d("BaseHovercardTrigger.react",["BaseHovercardTriggerWrapper.react","BaseNestedHovercardContext.react","BaseSuppressHovercards","CometHovercardSettingsContext","CometRelay","react","useBaseHovercardTrigger","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=b.useRef,m={};function n(a){var b=a.popoverEntryPoint,e=a.popoverOtherProps;e=e===void 0?m:e;var f=a.popoverProps;a.preventNested;a=babelHelpers.objectWithoutPropertiesLoose(a,["popoverEntryPoint","popoverOtherProps","popoverProps","preventNested"]);var g=c("useCometRelayEntrypointContextualEnvironmentProvider")();g=d("CometRelay").useEntryPointLoader(g,b);b=g[0];var h=g[1];g=j(function(){h(f)},[h,f]);a=c("useBaseHovercardTrigger")(babelHelpers["extends"]({},a,{onLoadEntryPoint:g}));g=a[0];return g(i.jsx(i.Fragment,{children:b!=null&&i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:b,props:e})}))}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.preventNested;b=b===void 0?!1:b;var e=babelHelpers.objectWithoutPropertiesLoose(a,["preventNested"]),f=k(c("CometHovercardSettingsContext"));f=f.hovercardInteractionPreference;var g=k(c("BaseNestedHovercardContext.react"));g=d("BaseSuppressHovercards").useIsHovercardSuppressed()||g||f===1;f=l(null);return g?i.jsx(c("BaseHovercardTriggerWrapper.react"),{display:a.display,children:a.children(f)}):i.jsx(c("BaseNestedHovercardContext.react").Provider,{value:b,children:i.jsx(n,babelHelpers["extends"]({},e))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWDidQueryPromptsNux",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(){g=!0}function b(){return g}f.markDidQueryPromptsNux=a;f.getDidQueryPromptsNux=b}),66);
__d("MWEncryptedBackUpEBNotEnabledError",[],(function(a,b,c,d,e,f){"use strict";a="EB not enabled";f.EB_NOT_ENABLED=a}),66);
__d("PolarisUserHoverCardTrigger.react",["BaseHovercardTrigger.react","BaseTextContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5),e=a.children,f;b[0]!==e?(f=function(a){return e(a)},b[0]=e,b[1]=f):f=b[1];var g;b[2]!==a||b[3]!==f?(g=j.jsx(d("BaseTextContext").BaseTextContextProvider,{nested:!1,children:j.jsx(c("BaseHovercardTrigger.react"),babelHelpers["extends"]({},a,{children:f}))}),b[2]=a,b[3]=f,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("useDeferredModuleOnReady",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(b){var c=j(function(){return b.getModuleIfRequireable()}),a=c[0],d=c[1];i(function(){if(a!=null)return;var c=b.onReady(function(a){d(function(){return a})});return function(){c.remove()}},[b,a]);return a}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data");a=function(a,c,e,f,g){if(g.byteLength<d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes){i.mustfix("cipher text is invalid");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())}a=new Uint8Array(g);var j=a.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);c=new(d("HChaCha20").HChaCha20)();var k=a.slice(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer;g=c.hChaCha20Bytes(j.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,e);return d("XPlatReactCrypto").subtleImportKey("raw",g,"AES-GCM",!1,["decrypt"]).then(function(a){return d("XPlatReactCrypto").subtleDecrypt({additionalData:f,iv:new Uint8Array(j.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,k)}).then(function(a){a=d("SymmetricEncryptionPaddingUtils").stripPadding(a);a==null&&i.mustfix("Failed to strip padding for symmetric decryption");return d("RetUtil").getNullableRetResult(a)})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric data decryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSDecryptProtobuf",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSBase64Decode.nop","LSCreateDerivedKeys.nop","LSGetBlobFromString.nop","LSIsMobileClient","LSLogMebClientEvent.nop","LSSymmetricEncryptionCreateDecryptedData.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][decryptProtobuf] Beginning execution."),d[1]=c.i64.of_float(Date.now()),d[8]=a[1]==null?c.i64.cast([0,0]):a[1],d[2]=c.i64.of_int32(a[3].length),c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[3],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return d[14]=d[12].get("epoch_anon_id"),d[12],d[15]=d[12].get("epoch_root_key"),d[12],d[16]=c.createArray(),d[26]=(d[16].push(c.i64.cast([0,32])),d[16]),c.i64.ge(d[8],c.i64.cast([0,3]))?c.resolve(d[17]=void 0):c.sequence([function(e){return c.nativeOperation(b("LSGetBlobFromString.nop"),a[2]).then(function(a){return a=a,d[26]=a[0],a})},function(a){return d[17]=d[26]}])},function(e){return c.i64.ge(d[8],c.i64.cast([0,4]))?(d[26]="_",d[18]=["message_key_in_epoch",d[26],c.blobs.to_string(d[14]),d[26],"cipher_version",d[26],c.i64.to_string(d[8]),d[26],"thread",d[26],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,3]))?(d[27]="_",d[26]=["message_key_in_epoch",d[27],c.blobs.to_string(d[14]),d[27],"cipher_version",d[27],c.i64.to_string(d[8]),d[27],"thread",d[27],a[2]==null?"":a[2]].join("")):(c.i64.ge(d[8],c.i64.cast([0,2]))?(d[28]="_",d[27]=["message_key_in_epoch",d[28],c.blobs.to_string(d[14]),d[28],"cipher_version",d[28],c.i64.to_string(d[8])].join("")):d[27]=["message_key_in_epoch","_",c.blobs.to_string(d[14])].join(""),d[26]=d[27]),d[18]=d[26]),c.nativeOperation(b("LSGetBlobFromString.nop"),d[18]).then(function(a){return a=a,d[19]=a[0],a})},function(a){return c.nativeOperation(b("LSCreateDerivedKeys.nop"),d[19],d[17],d[15],d[16]).then(function(a){return a=a,d[20]=a[0],a})},function(a){return d[20]?d[21]=!1:d[21]=!0,d[21]?c.resolve(d[22]=void 0):c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[20],c.i64.cast([0,0])).then(function(a){return a=a,d[26]=a[0],d[27]=a[1],a})},function(a){return d[22]=d[26]}])},function(e){return c.blobs.neq(d[22],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSBase64Decode.nop"),a[0]).then(function(a){return a=a,d[26]=a[0],a})},function(e){return c.blobs.neq(d[26],void 0)?c.sequence([function(e){return c.nativeOperation(b("LSSymmetricEncryptionCreateDecryptedData.nop"),d[22],c.blobs.of_string(["message_thread","_",a[2]].join("")),d[26]).then(function(a){return a=a,d[29]=a[0],a})},function(a){return d[27]=d[29]}]):c.resolve(d[27]=void 0)},function(a){return c.blobs.neq(d[27],void 0)?c.resolve(d[28]=d[27]):c.sequence([function(a){return d[29]=["Failed to decrypt message. Epoch Anon ID: ",c.blobs.to_string(d[14]),", Encryption Version: ",c.i64.to_string(d[8])].join(""),function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] ","",d[29]].join("")),d[30]=c.createArray(),void 0!==void 0?d[31]=(d[30].push(void 0),d[30]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure",[d[29]].join(""),d[30],c.i64.cast([0,3]))},function(a){return d[28]=void 0}])},function(a){return d[23]=d[28]}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] Decryption message key is null"),void 0!==void 0?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,85]),c.i64.cast([0,2]),"[EncryptedBackups][LSEncryptedBackupsDecryptProtobufStoredProcedure] Decryption message key is null",void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[27]=a[0],a})},function(a){return d[27]?d[28]=!0:d[28]=!1,d[28]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[29]=c.createArray(),void 0!==void 0?d[30]=(d[29].push(void 0),d[29]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[29],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(a){return d[26]=c.createArray(),void 0!==void 0?d[27]=(d[26].push(void 0),d[26]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDecryptProtobufStoredProcedure","Decryption message key is null",d[26],c.i64.cast([0,3]))},function(a){return d[23]=void 0}])},function(a){return c.blobs.neq(d[23],void 0)?(a=[d[23],void 0],d[24]=a[0],d[25]=a[1],a):(d[26]=new c.Map(),d[26].set("error_code",c.i64.cast([0,101])),d[26].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[26].set("error_message",""),a=[void 0,d[26]],d[24]=a[0],d[25]=a[1],a),a=[d[24],d[25]],d[3]=a[0],d[4]=a[1],a}]):c.resolve((d[12]=c.i64.of_int32(a[3].length),c.i64.eq(d[12],c.i64.cast([0,0]))?(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,102])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e):(d[15]=new c.Map(),d[15].set("error_code",c.i64.cast([0,103])),d[15].set("stored_procedure","LSEncryptedBackupsDecryptProtobufStoredProcedure"),d[15].set("error_message",""),e=[void 0,d[15]],d[13]=e[0],d[14]=e[1],e),e=[d[13],d[14]],d[3]=e[0],d[4]=e[1],e))},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[9]="Finishing execution. Execution time: ",d[10]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[11]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][decryptProtobuf] ",d[7],d[9],d[7],d[10],d[7],d[11]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[12]=",",d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"decryptProtobuf",[d[9],d[12],d[10],d[12],d[11]].join(""),d[13],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[3],d[4]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDecryptProtobufStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g,h){"use strict";var i=36,j=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof c("FbtResultBase")},k={MAX_MERGE_DEPTH:i,isTerminal:j,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||h(0,3714,a,b)},checkMergeObjectArgs:function(a,b){k.checkMergeObjectArg(a),k.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!j(a)&&!Array.isArray(a)||h(0,3715,a)},checkMergeIntoObjectArg:function(a){(!j(a)||typeof a==="function")&&!Array.isArray(a)||h(0,3716,a)},checkMergeLevel:function(a){a<i||h(0,3717)},checkArrayStrategy:function(a){a==null||a in k.ArrayStrategies||h(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};a=k;g["default"]=a}),98);
__d("SentryBlockGAMEEnforcementDialog.react",["IGDSDialog.react","IGWebBloksApp","PolarisNavigationUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.c;function a(a){var b=j(12),d=a.modal;a=a.onClose;var e=k,f=d==null?void 0:d.action,g=d==null?void 0:d.feedback_appeal_label,h=d==null?void 0:d.message,l=d==null?void 0:d.title;d=d==null?void 0:d.restriction_enrollment_data;var m;b[0]!==f||b[1]!==g||b[2]!==h||b[3]!==l||b[4]!==d?(m={feedback_action:f,feedback_appeal_label:g,feedback_message:h,feedback_title:l,restriction_enrollment_data:d},b[0]=f,b[1]=g,b[2]=h,b[3]=l,b[4]=d,b[5]=m):m=b[5];f=m;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(g={"bk.action.navigation.OpenUrl":e,"bk.action.navigation.OpenUrlV2":e,"ig.action.navigation.OpenUrl":e,"ig.action.navigation.OpenUrlSupportsDfa":e},b[6]=g):g=b[6];b[7]!==f?(h=i.jsx(c("IGWebBloksApp"),{actionOverrides:g,appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:f}),b[7]=f,b[8]=h):h=b[8];b[9]!==a||b[10]!==h?(l=i.jsx(c("IGDSDialog.react"),{onClose:a,children:h}),b[9]=a,b[10]=h,b[11]=l):l=b[11];return l}function k(a,b){return d("PolarisNavigationUtils").openURLWithFullPageReload(b)}g["default"]=a}),98);
__d("PolarisSentryFeedbackDialog.react",["CometPlaceholder.react","IGCoreModal.react","IGDSBox.react","IGDSSpinner.react","IGWebBloksApp","PolarisConfirmDialog.react","PolarisGenericStrings","PolarisNavigationStrings","PolarisReactRedux.react","PolarisSentryFeedbackActions","SentryBlockGAMEEnforcementDialog.react","WebBloksCallback","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=["open_bio_takedown_restriction","open_account_status_home_screen","open_account_status_game_experience_detail_page"];e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.handleReport=function(){c.props.modal&&c.props.modal.url&&c.props.modal.action&&(c.props.modal.action==="report_problem"?c.props.onReport(c.props.modal.url):c.props.modal.action==="open_request_form"&&c.props.onOpenForm(c.props.modal.url))},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){var a=this.props,b=a.modal;a=a.onConfirm;if(!b)return null;if(b.action==="open_login_challenges"){var e=k(b),f=new Map();return l(e,f)}if(j.includes(b.action)){e={feedback_action:b.action,feedback_appeal_label:b.feedback_appeal_label,feedback_message:b.message,feedback_title:b.title,restriction_enrollment_data:b.restriction_enrollment_data};f=new Map([["onClickWebCallback",new(d("WebBloksCallback").WebBloksCallback)(null,null,null,function(){return window.location.reload()})]]);switch(b.action){case"open_bio_takedown_restriction":return i.jsx(c("IGWebBloksApp"),{appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:e,props:f});case"open_account_status_home_screen":case"open_account_status_game_experience_detail_page":return i.jsx(c("SentryBlockGAMEEnforcementDialog.react"),{modal:b})}}return i.jsx(c("PolarisConfirmDialog.react"),{body:b.message,cancelLabel:d("PolarisGenericStrings").OK_TEXT,confirmLabel:d("PolarisNavigationStrings").REPORT_PROBLEM_TEXT,onClose:a,onConfirm:this.handleReport,title:b.title})};return b}(i.PureComponent);function a(a){return{modal:a.sentryFeedback.modal}}function k(a){return{feedback_action:a.action,feedback_appeal_label:a.feedback_appeal_label,feedback_message:a.message,feedback_title:a.title,restriction_enrollment_data:a.restriction_enrollment_data}}function l(a,b){return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("IGCoreModal.react"),{backdropColor:"dark",children:i.jsx(c("IGDSBox.react"),{alignItems:"center",height:112,justifyContent:"center",position:"relative",width:"100%",children:i.jsx(c("IGDSSpinner.react"),{size:"medium"})})}),children:i.jsx(c("IGCoreModal.react"),{closeButtonPosition:"hidden",size:"large",children:i.jsx(c("IGWebBloksApp"),{appId:"com.bloks.www.instagram.igwb.exp.enforcement.dialog",params:a,props:b})})})}l.displayName=l.name+" [from "+f.id+"]";function b(a){return{onConfirm:function(){return a(d("PolarisSentryFeedbackActions").dismissSentryFeedback())},onOpenForm:function(b){return a(d("PolarisSentryFeedbackActions").openForm(b))},onReport:function(b){return a(d("PolarisSentryFeedbackActions").reportProblem(b))}}}f=d("PolarisReactRedux.react").connect(a,b)(e);g["default"]=f}),98);
__d("first",[],(function(a,b,c,d,e,f){"use strict";function a(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;return d}return null}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("LSDeleteThenInsertBotProfileInfoV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(299).put({botId:a[0],isCreatedByViewer:a[1],description:a[4],tintColor:a[2],shortDescription:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSContactDeleteThenInsertBotProfileInfoV2StoredProcedure";e.exports=a}),null);
__d("LSUpdateFolderThreadSnippet",["LSArrayGetObjectAt","LSGetThreadParticipantDisplayName","LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([-1,4294967284]))&&!1?c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([-1,4294967284]))&&!1?c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.resolve(d[3]=a[1]):c.sequence([function(b){return d[4]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[7]=(d[4].push(a.threadKey),d[4])})},function(a){return c.sequence([function(a){return d[7]=c.createArray(),d[8]=c.i64.of_int32(d[4].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.loopAsync(d[8],function(a){return d[10]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[4],d[10]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return d[13]=(d[7].push(c.i64.to_string(d[11])),d[7])}])}):c.resolve()},function(a){return d[9]=d[7].join(","),d[5]=d[9]}])},function(a){return c.count(c.filter(c.db.table(9).fetch(),function(a){return d[4].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&!0&&!0})).then(function(a){return d[6]=a})},function(a){return d[3]=d[6]}])},function(a){return d[1]=d[3]}]):c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.resolve(d[3]=a[1]):c.sequence([function(b){return c.count(c.filter(c.db.table(9).fetch([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.lt(b.lastReadWatermarkTimestampMs,b.lastActivityTimestampMs)&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))&&c.i64.eq(b.syncSource,c.i64.cast([0,2])))})).then(function(a){return d[4]=a})},function(a){return d[3]=d[4]}])},function(a){return d[1]=d[3]}])},function(e){return c.i64.eq(d[1],c.i64.cast([0,0]))?c.sequence([function(b){return d[3]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[8]=(d[3].push(a.threadKey),d[3])})},function(a){return c.sequence([function(a){return d[8]=c.createArray(),d[9]=c.i64.of_int32(d[3].length),c.i64.gt(d[9],c.i64.cast([0,0]))?c.loopAsync(d[9],function(a){return d[11]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[3],d[11]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return d[14]=(d[8].push(c.i64.to_string(d[12])),d[8])}])}):c.resolve()},function(a){return d[10]=d[8].join(","),d[4]=d[10]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.count(c.filter(c.db.table(9).fetch(),function(a){return d[3].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.eq(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&c.i64.neq(a.snippetSenderContactId,d[5])&&a.isAdminSnippet===!1})).then(function(a){return d[6]=a})},function(e){return c.i64.eq(c.i64.cast([0,0]),d[6])?c.resolve((d[8]=a[2].get("all_read"),a[2],d[7]=d[8])):c.sequence([function(b){return d[8]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[19]=(d[8].push(a.threadKey),d[8])})},function(a){return c.sequence([function(a){return d[19]=c.createArray(),d[20]=c.i64.of_int32(d[8].length),c.i64.gt(d[20],c.i64.cast([0,0]))?c.loopAsync(d[20],function(a){return d[22]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],d[22]).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return d[25]=(d[19].push(c.i64.to_string(d[23])),d[19])}])}):c.resolve()},function(a){return d[21]=d[19].join(","),d[9]=d[21]}])},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return c.islc(c.filter(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),function(a){return d[8].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.eq(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&c.i64.neq(a.snippetSenderContactId,d[10])&&a.isAdminSnippet===!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=["",c.i64.cast([-1,4294967295])],d[11]=a[0],d[12]=a[1],a):(e=b.item,a=[e.snippet,e.threadKey],d[11]=a[0],d[12]=a[1],a)})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.islc(c.db.table(14).fetch([[[d[12],{gt:d[14]}],[d[12],{lt:d[14]}]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?d[15]=c.i64.cast([-1,4294967295]):(e=b.item,d[15]=e.contactId)})},function(a){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),d[12],d[15]).then(function(a){return a=a,d[17]=a[0],a})},function(a){return c.i64.eq(d[6],c.i64.cast([0,1]))?c.sequence([function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[17]),d[19]),c.localizeV2Async(c.i64.cast([0,1907280305]),d[19]).then(function(a){return d[20]=a})},function(a){return d[18]=d[20]}]):c.sequence([function(a){return d[19]=c.createArray(),d[21]=(d[19].push(d[17]),d[19]),c.localizeV2Async(c.i64.cast([0,1112375422]),d[19]).then(function(a){return d[20]=a})},function(a){return d[18]=d[20]}])},function(a){return d[7]=d[18]}])},function(a){return d[2]=d[7]}]):c.sequence([function(e){return c.i64.eq(d[1],c.i64.cast([0,1]))?c.sequence([function(b){return d[4]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[10]=(d[4].push(a.threadKey),d[4])})},function(a){return c.sequence([function(a){return d[10]=c.createArray(),d[11]=c.i64.of_int32(d[4].length),c.i64.gt(d[11],c.i64.cast([0,0]))?c.loopAsync(d[11],function(a){return d[13]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[4],d[13]).then(function(a){return a=a,d[14]=a[0],d[15]=a[1],a})},function(a){return d[16]=(d[10].push(c.i64.to_string(d[14])),d[10])}])}):c.resolve()},function(a){return d[12]=d[10].join(","),d[5]=d[12]}])},function(a){return c.islc(c.filter(c.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),function(a){return d[4].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&!0&&a.isAdminSnippet===!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=["",c.i64.cast([-1,4294967295])],d[6]=a[0],d[7]=a[1],a):(e=b.item,a=[e.snippet,e.threadKey],d[6]=a[0],d[7]=a[1],a)})},function(b){return d[6]!==void 0?d[9]=d[6]:(d[10]=a[2].get("unread_singular"),a[2],d[9]=[c.i64.to_string(d[1]),d[10]].join("")),d[3]=d[9]}]):c.sequence([function(a){return d[4]=c.createArray(),d[6]=(d[4].push(c.i64.to_string(d[1])),d[4]),c.localizeV2Async(c.i64.cast([0,3575257287]),d[4]).then(function(a){return d[5]=a})},function(a){return d[3]=d[5]}])},function(a){return d[2]=d[3]}])},function(a){return d[0]=d[2]}]):c.sequence([function(e){return c.i64.eq(f.threadType,c.i64.cast([0,17]))?c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([-1,4294967284]))&&!1?c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.resolve(d[4]=a[1]):c.sequence([function(b){return d[5]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[8]=(d[5].push(a.threadKey),d[5])})},function(a){return c.sequence([function(a){return d[8]=c.createArray(),d[9]=c.i64.of_int32(d[5].length),c.i64.gt(d[9],c.i64.cast([0,0]))?c.loopAsync(d[9],function(a){return d[11]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[11]).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(a){return d[14]=(d[8].push(c.i64.to_string(d[12])),d[8])}])}):c.resolve()},function(a){return d[10]=d[8].join(","),d[6]=d[10]}])},function(a){return c.count(c.filter(c.db.table(9).fetch(),function(a){return d[5].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&!0&&!0})).then(function(a){return d[7]=a})},function(a){return d[4]=d[7]}])},function(a){return d[2]=d[4]}]):c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.resolve(d[4]=a[1]):c.sequence([function(b){return c.count(c.filter(c.db.table(9).fetch([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.lt(b.lastReadWatermarkTimestampMs,b.lastActivityTimestampMs)&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))&&c.i64.eq(b.syncSource,c.i64.cast([0,2])))})).then(function(a){return d[5]=a})},function(a){return d[4]=d[5]}])},function(a){return d[2]=d[4]}])},function(a){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.sequence([function(a){return c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2213485461]),void 0).then(function(a){return d[5]=a})},function(a){return d[4]=d[5]}])},function(a){return d[3]=d[4]}]):c.sequence([function(a){return c.i64.eq(d[2],c.i64.cast([0,1]))?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,3802288555]),void 0).then(function(a){return d[5]=a})},function(a){return d[4]=d[5]}]):c.sequence([function(a){return d[5]=c.createArray(),d[7]=(d[5].push(c.i64.to_string(d[2])),d[5]),c.localizeV2Async(c.i64.cast([0,1420387436]),d[5]).then(function(a){return d[6]=a})},function(a){return d[4]=d[6]}])},function(a){return d[3]=d[4]}])},function(a){return d[1]=d[3]}]):c.sequence([function(e){return c.i64.eq(a[0],c.i64.cast([-1,4294967284]))&&!1?c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.resolve(d[7]=a[1]):c.sequence([function(b){return d[8]=c.createArray(),c.forEach(c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,20]))),function(a){a=a.item;return d[11]=(d[8].push(a.threadKey),d[8])})},function(a){return c.sequence([function(a){return d[11]=c.createArray(),d[12]=c.i64.of_int32(d[8].length),c.i64.gt(d[12],c.i64.cast([0,0]))?c.loopAsync(d[12],function(a){return d[14]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[8],d[14]).then(function(a){return a=a,d[15]=a[0],d[16]=a[1],a})},function(a){return d[17]=(d[11].push(c.i64.to_string(d[15])),d[11])}])}):c.resolve()},function(a){return d[13]=d[11].join(","),d[9]=d[13]}])},function(a){return c.count(c.filter(c.db.table(9).fetch(),function(a){return d[8].some(function(b){return c.i64.eq(a.threadKey,b)})&&c.i64.lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)&&!0&&!0})).then(function(a){return d[10]=a})},function(a){return d[7]=d[10]}])},function(a){return d[2]=d[7]}]):c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.resolve(d[7]=a[1]):c.sequence([function(b){return c.count(c.filter(c.db.table(9).fetch([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),function(b){return c.i64.eq(b.parentThreadKey,a[0])&&c.i64.lt(b.lastReadWatermarkTimestampMs,b.lastActivityTimestampMs)&&(c.i64.eq(b.authorityLevel,c.i64.cast([0,80]))||c.i64.eq(b.authorityLevel,c.i64.cast([0,60]))&&c.i64.eq(b.syncSource,c.i64.cast([0,2])))})).then(function(a){return d[8]=a})},function(a){return d[7]=d[8]}])},function(a){return d[2]=d[7]}])},function(b){return d[3]=a[2].get("all_read"),a[2],d[4]=a[2].get("unread_singular"),a[2],d[5]=a[2].get("unread_plural"),a[2],c.i64.eq(d[2],c.i64.cast([0,0]))?d[6]=d[3]:(c.i64.eq(d[2],c.i64.cast([0,1]))?d[7]=[c.i64.to_string(d[2]),d[4]].join(""):d[7]=[c.i64.to_string(d[2]),d[5]].join(""),d[6]=d[7]),d[1]=d[6]}])},function(a){return d[0]=d[1]}])},function(a){return c.forEach(c.db.table(9).fetch([[[f.threadKey]]]),function(a){var b=a.update;a.item;return b({snippet:d[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0})})}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateFolderThreadSnippetStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("Base64",[],(function(a,b,c,d,e,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function h(a){a=a.charCodeAt(0)<<16|a.charCodeAt(1)<<8|a.charCodeAt(2);return String.fromCharCode(g.charCodeAt(a>>>18),g.charCodeAt(a>>>12&63),g.charCodeAt(a>>>6&63),g.charCodeAt(a&63))}var i=">___?456789:;<=_______\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function j(a){a=i.charCodeAt(a.charCodeAt(0)-43)<<18|i.charCodeAt(a.charCodeAt(1)-43)<<12|i.charCodeAt(a.charCodeAt(2)-43)<<6|i.charCodeAt(a.charCodeAt(3)-43);return String.fromCharCode(a>>>16,a>>>8&255,a&255)}var k={encode:function(a){a=unescape(encodeURI(a));var b=(a.length+2)%3;a=(a+"\0\0".slice(b)).replace(/[\s\S]{3}/g,h);return a.slice(0,a.length+b-2)+"==".slice(b)},decode:function(a){a=a.replace(/[^A-Za-z0-9+\/]/g,"");var b=a.length+3&3;a=(a+"AAA".slice(b)).replace(/..../g,j);a=a.slice(0,a.length+b-3);try{return decodeURIComponent(escape(a))}catch(a){throw new Error("Not valid UTF-8")}},encodeObject:function(a){return k.encode(JSON.stringify(a))},decodeObject:function(a){return JSON.parse(k.decode(a))},encodeNums:function(a){return String.fromCharCode.apply(String,a.map(function(a){return g.charCodeAt((a|-(a>63?1:0))&-(a>0?1:0)&63)}))}};a=k;f["default"]=a}),66);
__d("PolarisMiniToast.react",["cx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(5),c=a.className;a=a.text;var d;b[0]!==a?(d=k.jsx("div",{className:"_ac7s",children:k.jsx("div",{className:"_ac7t",children:k.jsx("p",{className:"_ac7u",children:a})})}),b[0]=a,b[1]=d):d=b[1];b[2]!==c||b[3]!==d?(a=k.jsx("div",{className:c,children:d}),b[2]=c,b[3]=d,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("PolarisSnackbar.react",["cx","PolarisIGCoreButton.react","joinClasses","react","warning"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){a.preventDefault(),c.props.onActionClick&&c.props.onActionClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.render=function(){var a=this.props,b=a.actionText,d=a.className,e=a.onActionClick;a=a.text;c("warning")(!!(b!=null&&e!=null)||b==null&&e==null,"Having action text without a callback, or vice versa, makes no sense");return j.jsxs("div",{className:c("joinClasses")(d,"_abmn"),children:[j.jsx("div",{className:"_abmo",children:j.jsx("p",{className:"_abmp",children:a})}),b!=null&&j.jsx(c("PolarisIGCoreButton.react"),{borderless:!0,color:"ig-primary-button",onClick:this.$1,children:b})]})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisToastWrapper.react",["cx","BasePortal.react","PolarisEventLoop","PolarisMiniToast.react","PolarisReactRedux.react","PolarisSnackbar.react","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=null;c.state={currentToast:b.toast,hasNextToast:!1,nextToast:null};return c}var d=b.prototype;d.componentWillUnmount=function(){c("PolarisEventLoop").clearTimeout(this.$1)};b.getDerivedStateFromProps=function(a,b){return b.currentToast!==a.toast?{hasNextToast:!0,nextToast:a.toast}:null};d.componentDidUpdate=function(a,b){var d=this;!b.hasNextToast&&this.state.hasNextToast&&(c("PolarisEventLoop").clearTimeout(this.$1),this.$1=c("PolarisEventLoop").setTimeout(function(){d.$1=null,d.setState(function(a){return{currentToast:a.nextToast,hasNextToast:!1,nextToast:null}})},200))};d.render=function(){var a=this.state.currentToast,b=c("joinClasses")(this.props.className,"_acb3"),d="_acb4"+(this.state.hasNextToast?" _acb5":""),e=c("joinClasses")(this.props.className,"_acb6"),f="_acb7"+(this.state.hasNextToast?" _acb8":""),g=null,h=null;if(a)switch(a==null?void 0:a.toastType){case"MINI_TOAST":g=j.jsx(c("PolarisMiniToast.react"),{className:"_acb9",text:a.text});break;case"DEFAULT_TOAST":default:h=j.jsx(c("PolarisSnackbar.react"),{actionText:a.actionText,className:"_acba",onActionClick:a.actionHandler,text:a.text});break}return j.jsxs(c("BasePortal.react"),{children:[j.jsx("div",{className:b,children:j.jsx("div",{className:d,children:h})}),j.jsx("div",{className:e,children:j.jsx("div",{className:f,children:g})})]})};return b}(j.PureComponent);function a(a){return{toast:a.toasts.toast}}e=d("PolarisReactRedux.react").connect(a)(b);g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("EBMessageBulkPointQuery",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","LSVec","MAWCurrentUser","MAWEncryptedBackupUtils","MAWEncryptedBackupsRestoreMessageOverGraphQL","MAWQplProxy","WABase64","WAHashStringToNumber","WALogger","WAPushSafeTypes","WAResultOrError","WorkerRelay","asyncToGeneratorRuntime","cr:7713","handleRestoreMessagesGraphQLResponse","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL range restore error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Calling EBLS without EBLS being available for message range query"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] GQL point query called from non-worker context"]);n=function(){return a};return a}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("EBAPIWorkerCheck").runningInWorker()){d("WALogger").ERROR(n());return d("WAResultOrError").makeError("called-from-main-thread")}a=d("WAPushSafeTypes").unsafeNotNullable(a);var e=a.mpsMessageQuery,f=a.sortOrderMsList,g=a.source,o=a.threadId;a=a.traceId;var p=a!=null?d("WAHashStringToNumber").hashStringToNumber(a):void 0,q=c("qpl")._(521474469,"2612");try{d("MAWQplProxy").startQplUserFlow(q,{bool:{mainThreadRestore:!1,workerThreadRestore:!0}},p);if(b("cr:7713")==null){d("WALogger").ERROR(m());d("MAWQplProxy").sendQPLFailThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EBLS_NOT_INITIALIZED,void 0,p);return d("WAResultOrError").makeError("ebls-not-intialized")}yield b("cr:7713").init();var r=(yield b("cr:7713").getLSStorage()),s=(yield d("MAWEncryptedBackupUtils").getBackupTenancy(r.tables));if(s!=null&&!(h||(h=d("I64"))).equal(s,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))){d("MAWQplProxy").sendQPLFailThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.EB_NOT_ENABLED,void 0,p);return d("WAResultOrError").makeError("eb-not-enabled")}s=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(r));if(s==null){d("WALogger").ERROR(l());d("MAWQplProxy").sendQPLFailThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,void 0,p);return d("WAResultOrError").makeError("no-client-state")}var t=s.device_id,u=s.locally_available_epochs,v=s.mailboxRootKey;s=s.ocmfClientStateBlob;if(t==null||v==null||s==null){d("WALogger").ERROR(k());d("MAWQplProxy").sendQPLFailThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,void 0,p);return d("WAResultOrError").makeError("invalid-client-state")}var w=d("MAWCurrentUser").getAppID();u={restore_context:{act_thread_id:o,site:"www",tam_thread_subtype:0},success:{device_context:{device_id:(h||(h=d("I64"))).to_float(t),locally_available_epochs:u,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(v),ocmf_client_state_blob:d("WABase64").encodeB64(s)}},mps_message_query:e}};if(f!=null){v=c("LSVec").ofArray(f.map(function(a){return(h||(h=d("I64"))).of_string(""+a)}));u=babelHelpers["extends"]({},u,{sort_order_ms_list:v})}d("MAWQplProxy").sendQplPointThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:p});e=(yield d("WorkerRelay").createWorkerQuery(d("MAWEncryptedBackupsRestoreMessageOverGraphQL").query,{app_id:String((s=w)!=null?s:"0"),restore_payload_string:JSON.stringify(u),restore_type:"MESSAGE_QUERY_RESTORE"}));f=(yield d("EBAPISharedUtils").constructEBRestoreResponse(e,!0,q,r,p,t,o,g,a,void 0));if(f.success)return d("WAResultOrError").makeResult(f.response);else return d("WAResultOrError").makeError(f.response)}catch(a){d("WALogger").ERROR(j(),a);d("MAWQplProxy").sendQPLFailThroughBridge(q,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,void 0,p);return d("WAResultOrError").makeError("runtime-error",a)}});return o.apply(this,arguments)}g.messageBulkPointQuery=a}),98);
__d("useGetAdditionalPublisherPlatforms.react",["react","usePolarisBoostAdFormatPreferences"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(){var a=i(2),b=c("usePolarisBoostAdFormatPreferences")();b=b.getPreferenceValue;var d;a[0]!==b?(d=b("ADVANTAGE_PLUS_PLACEMENTS")?["FACEBOOK","INSTAGRAM"]:["INSTAGRAM"],a[0]=b,a[1]=d):d=a[1];return d}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometRouteRenderType",["CometRouterRenderTypeContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(c("CometRouterRenderTypeContext"));return a}function b(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="pushView"}function e(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="hosted"}function f(){var a=i(c("CometRouterRenderTypeContext"));return(a==null?void 0:a.renderType)==="main"}g.useCometRouteRenderingLocation=a;g.useIsPushView=b;g.useIsHosted=e;g.useIsMain=f}),98);
__d("IGDSDeviceDesktopPanoOutlineIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{d:"M22 15h-.998V6.196a2.195 2.195 0 0 0-2.191-2.192H5.193a2.195 2.195 0 0 0-2.192 2.192V15H2a1 1 0 0 0-1 1v1.218a2.781 2.781 0 0 0 2.778 2.778h16.444A2.781 2.781 0 0 0 23 17.218V16a1 1 0 0 0-1-1ZM5.001 6.196a.19.19 0 0 1 .192-.192h13.618a.192.192 0 0 1 .19.192V15h-14ZM21 17.218a.78.78 0 0 1-.778.778H3.778A.78.78 0 0 1 3 17.218V17h18Z"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:d})),b[1]=a,b[2]=d):d=b[2];return d}b=j.memo(a);g["default"]=b}),98);
__d("IGDSVideoChatPanoOutlineIcon.react",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("rect",{fill:"none",height:"18",rx:"3",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",width:"16.999",x:"1",y:"3"}),e=j.jsx("path",{d:"m17.999 9.146 2.495-2.256A1.5 1.5 0 0 1 23 8.003v7.994a1.5 1.5 0 0 1-2.506 1.113L18 14.854",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==a?(d=j.jsxs(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:[d,e]})),b[2]=a,b[3]=d):d=b[3];return d}b=j.memo(a);g["default"]=b}),98);
__d("PolarisDates",["fbt","polarisFormatDate"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){if(a<=1)return h._("__JHASH__4eYkqzuui-H__JHASH__");else if(b)return h._("__JHASH__JPQPNpOOgEq__JHASH__",[h._param("seconds",a)]);return h._("__JHASH__pmb5qFrm4ZG__JHASH__",[h._param("seconds",a)])}function j(a,b){if(b&&a===1)return h._("__JHASH__Dmzi1zraR7r__JHASH__");else if(b)return h._("__JHASH__j_T3KNbRapJ__JHASH__",[h._param("minutes",a)]);else if(a===1)return h._("__JHASH__rpiC4aez6Aw__JHASH__");return h._("__JHASH__umLHiCNUAg8__JHASH__",[h._param("minutes",a)])}function k(a,b){if(b&&a===1)return h._("__JHASH__V8YsjsS9WSl__JHASH__");else if(b)return h._("__JHASH__HuU2_4862X7__JHASH__",[h._param("hours",a)]);else if(a===1)return h._("__JHASH__ehBXrjq7799__JHASH__");return h._("__JHASH__d9opDaRPADb__JHASH__",[h._param("hours",a)])}function l(a,b){if(b&&a===1)return h._("__JHASH__MOpDm-XqzIh__JHASH__");else if(b)return h._("__JHASH__iKwabTDgQKw__JHASH__",[h._param("days",a)]);else if(a===1)return h._("__JHASH__J-feraOUjzi__JHASH__");return h._("__JHASH__teiff_9zOwz__JHASH__",[h._param("days",a)])}function m(a,b){if(b&&a===1)return h._("__JHASH__v2R-Wm968ob__JHASH__");else if(b)return h._("__JHASH__A8UH03q0k6f__JHASH__",[h._param("weeks",a)]);else if(a===1)return h._("__JHASH__XcCF79Ujhug__JHASH__");return h._("__JHASH__o-__GLkZKKT__JHASH__",[h._param("weeks",a)])}function n(a){a=Math.floor(new Date().getTime()/1e3-a);var b=Math.floor(a/60),c=Math.floor(b/60),d=Math.floor(c/24),e=Math.floor(d/7);return{days:d,hours:c,minutes:b,seconds:a,weeks:e}}function o(a,b){a=n(a);var c=a.days,d=a.hours,e=a.minutes,f=a.seconds;a=a.weeks;if(f<60)return i(f,b);if(e<60)return j(e,b);if(d<24)return k(d,b);return c<7?l(c,b):m(a,b)}function a(a){var b=n(a),d=b.days,e=b.hours,f=b.minutes;b=b.seconds;if(b<60)return i(b,!1);if(f<60)return j(f,!1);if(e<24)return k(e,!1);if(d<8)return l(d,!1);b=new Date().getFullYear()===new Date(a*1e3).getFullYear();return b?c("polarisFormatDate")(a,"F j"):c("polarisFormatDate")(a,"F j, Y")}function b(a){return o(a,!1)}function d(a){return o(a,!0)}g.getTimestamp=a;g.ago=b;g.agoShortened=d}),226);
__d("PolarisTimestamp.react",["PolarisDates","polarisFormatDate","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isLong,e=a.value;a=babelHelpers.objectWithoutPropertiesLoose(a,["isLong","value"]);var f=new Date(e*1e3);f=f.toISOString();b=b===!0?d("PolarisDates").getTimestamp(e):d("PolarisDates").agoShortened(e);return i.jsx("time",babelHelpers["extends"]({},a,{className:a.className,dateTime:f,suppressHydrationWarning:!0,title:c("polarisFormatDate")(e,"M j, Y"),children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("compactArray",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];for(var c=0;c<a.length;++c){var d=a[c];d!=null&&b.push(d)}return b}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("IGDBroadcastChannelQPTooltip.react",["cr:1017","cr:1271","react","useHasIGBroadcastChannelTab"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(){var a=c("useHasIGBroadcastChannelTab")();return j(function(){return a&&b("cr:1017")!==null&&b("cr:1271")!==null?i.jsx(b("cr:1271"),{slot:b("cr:1017").SLOTS.inbox_folder_menu}):null},[a])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSMarkBumpedThreadsSeen",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.islc(c.filter(c.db.table(9).fetchDesc([[[a[0]]],"secondaryParentThreadKeyLastActivityTimestampMs"]),function(b){return c.i64.eq(b.secondaryParentThreadKey,a[0])&&[c.i64.cast([0,18]),c.i64.cast([0,23]),c.i64.cast([0,21])].some(function(a){return c.i64.eq(b.threadType,a)})}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,d[0]=f.lastActivityTimestampMs,c.i64.gt(d[0],c.i64.cast([0,0]))?c.db.table(35).fetch([[[a[0]]]]).next().then(function(f,h){var e=f.done;f=f.value;return e?c.sequence([function(b){return c.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:d[0]})},function(e){return d[2]=new c.Map(),d[2].set("parent_thread_key",a[0]),d[2].set("last_seen_time_ms",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[3])}]):(h=f.item,c.i64.lt(h.lastSeenRequestTimestampMs,d[0])?c.sequence([function(b){return c.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:d[0]})},function(e){return d[2]=new c.Map(),d[2].set("parent_thread_key",a[0]),d[2].set("last_seen_time_ms",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[3])}]):c.resolve())}):c.resolve())})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkBumpedThreadsSeenStoredProcedure";e.exports=a}),null);
__d("LSMarkBumpedThreadsSeenStoredProcedure",["LSMarkBumpedThreadsSeen","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSMarkBumpedThreadsSeen")(b.secondaryParentThreadKey,a)}g["default"]=a}),98);
__d("LSMarkFolderSeen",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.threadType)})},function(e){return c.i64.eq(d[0],c.i64.cast([0,17]))?c.sequence([function(b){return d[2]=c.i64.of_float(Date.now()),c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastReadWatermarkTimestampMs:d[2]})})},function(e){return d[3]=c.i64.of_float(Date.now()),c.i64.gt(d[3],c.i64.cast([0,0]))?c.db.table(35).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:d[3]})},function(e){return d[5]=new c.Map(),d[5].set("parent_thread_key",a[0]),d[5].set("last_seen_time_ms",d[3]),d[6]=c.toJSON(d[5]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[6])}]):(f=e.item,c.i64.lt(f.lastSeenRequestTimestampMs,d[3])?c.sequence([function(b){return c.forEach(c.db.table(35).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastSeenRequestTimestampMs:d[3]})})},function(e){return d[5]=new c.Map(),d[5].set("parent_thread_key",a[0]),d[5].set("last_seen_time_ms",d[3]),d[6]=c.toJSON(d[5]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[6])}]):c.resolve())}):c.resolve()}]):c.sequence([function(b){return c.islc(c.sortBy(c.filter(c.db.table(276).fetch(),function(b){return c.i64.eq(b.folderType,a[0])}),[["lastActivityAuthoritativeTsMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[8]=b.lastActivityAuthoritativeTsMs,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,0]),d[2]=d[7])})},function(b){return c.islc(c.db.table(9).fetchDesc([[[a[0]]],"parentThreadKeyLastActivityTimestampMs"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=c.i64.cast([0,0]):(b=a.item,d[8]=b.lastActivityTimestampMs,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,0]),d[4]=d[7])})},function(e){return d[6]=c.i64.gt(d[2],d[4])?d[2]:d[4],c.i64.gt(d[6],c.i64.cast([0,0]))?c.db.table(35).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(35).add({parentThreadKey:a[0],lastSeenRequestTimestampMs:d[6]})},function(e){return d[8]=new c.Map(),d[8].set("parent_thread_key",a[0]),d[8].set("last_seen_time_ms",d[6]),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[9])}]):(f=e.item,c.i64.lt(f.lastSeenRequestTimestampMs,d[6])?c.sequence([function(b){return c.forEach(c.db.table(35).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastSeenRequestTimestampMs:d[6]})})},function(e){return d[8]=new c.Map(),d[8].set("parent_thread_key",a[0]),d[8].set("last_seen_time_ms",d[6]),d[9]=c.toJSON(d[8]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),"fire_forget",c.i64.cast([0,6]),d[9])}]):c.resolve())}):c.resolve()}])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkFolderSeenStoredProcedure";e.exports=a}),null);
__d("LSMarkFolderSeenStoredProcedure",["LSMarkFolderSeen","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSMarkFolderSeen")(b.parentThreadKey,a)}g["default"]=a}),98);
__d("LSReportAppState",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("app_state",a[0]),d[0].set("request_id",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ls_presence_report_app_state",c.i64.cast([0,123]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,6]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSPresenceReportAppStateStoredProcedure";e.exports=a}),null);
__d("MWCMMarkBumpedThreadsSeen",["LSFactory","LSMarkBumpedThreadsSeenStoredProcedure","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a!=null&&(yield c("LSMarkBumpedThreadsSeenStoredProcedure")(c("LSFactory")(b),{secondaryParentThreadKey:a}))});return h.apply(this,arguments)}g.MWCMMarkBumpedThreadsSeen=a}),98);
__d("MWPMarkSeenDeferred",["LSFactory","LSMarkFolderSeenStoredProcedure","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a!=null&&(yield c("LSMarkFolderSeenStoredProcedure")(c("LSFactory")(b),{parentThreadKey:a}))});return h.apply(this,arguments)}g.markSeen=a}),98);
__d("mwEBSetBackupState",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.setBackupState;a=a.state;switch(a){case 1:break;case 2:b(2);break;case 3:b(3);break;case 4:b(4);break;case-1:b(-1);break;case 0:break}}f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("MAWBridgeTraceEvent",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ReceivedReceipt","ReceivedSent","FlowEndForFailure","FlowEndForSuccess"]);c=a;f["default"]=c}),66);
__d("MAWThreadUtils",["LSIntEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return a.threads.where("jid").equals(b).modify(c)}function b(a){a=d("WAJids").switchOnMsgrChatJidType(a,{group:function(){return(h||(h=d("LSIntEnum"))).ofNumber(16)},user:function(){return(h||(h=d("LSIntEnum"))).ofNumber(15)}});return a}g.updateThreadWithJid=a;g.getLSThreadTypeFromJid=b}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","MAWMIC","MAWMICSchema","QuickPerformanceLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h={},h[d("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,h);(function(){Object.keys(l).forEach(function(a){d("MAWMIC").addIntAnnotation(a,0)})})();function m(a){d("MAWMIC").addIntAnnotation(a,++l[a])}var n=new(c("Deferred"))(),o=new Set(),p=new Set();function a(){d("MAWMIC").markEvent("occamadillo_thread_mapping_first_nop_start")}function e(){d("MAWMIC").markEvent("occamadillo_thread_mapping_acto_nop_start")}var q=null;function f(a){d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_start);if(o.has(a)){m(d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}p.add(a);q=(k||(k=c("QuickPerformanceLogger"))).currentTimestamp();o.add(a);d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);d("MAWMIC").wasEventLogged(d("MAWMICSchema").POINTS.ls_sync_end)&&(m(d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync),d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_new_pending_thread_after_init_sync))}function r(){d("MAWMIC").markEvent("occamadillo_thread_mapping_first_thread_check_in_ui_start")}function s(){d("MAWMIC").markEvent("occamadillo_thread_mapping_acto_check_in_ui_start")}function t(){d("MAWMIC").markEvent("occamadillo_thread_mapping_first_thread_check_in_worker_start")}function u(){d("MAWMIC").markEvent("occamadillo_thread_mapping_acto_check_in_worker_start")}function v(a){d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_bridge_call_acked,a)}var w=[];function x(a){d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_first_bulk_batch_run),m("occamadilloBatchesSentToWorker"),w.push(a),d("MAWMIC").addIntArrayAnnotation(d("MAWMICSchema").ANNOTATIONS.occamadilloBulkBatchSizes,w)}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("gkx")("2661"))yield n.getPromise();else{var b=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(b,(j||(j=d("LSIntEnum"))).ofNumber(95))}d("MAWMIC").markEvent("occamadillo_sync_group_complete");p["delete"](a);d("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",o.size-p.size);B()});return z.apply(this,arguments)}function A(){n.resolve(),B()}function B(){p.size===0&&(d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size),q!=null&&d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_last_thread_added_to_pending,q),d("MAWMIC").markEvent(d("MAWMICSchema").POINTS.occamadillo_thread_mapping_end))}g.incrementCounter=m;g.markFirstThreadPassedToNativeOp=a;g.markACTOPassedToNativeOp=e;g.addPendingThread=f;g.markFirstThreadCheckedInUiThread=r;g.markACTOCheckedInUiThread=s;g.markFirstThreadCheckedInWorker=t;g.markACTOCheckedInWorker=u;g.markBridgeCallAcked=v;g.markBulkBatchRun=x;g.removePendingThread=y;g.completeSync=A;g.maybeEndOccamadilloThreadMapping=B}),98);/*FB_PKG_DELIM*/
__d("EBMessageRangeQuery",["EBAPIQPLPoints","EBAPISharedUtils","EBAPIWorkerCheck","I64","LSDatabaseSingleton","LSEncryptedBackupsMessagesRangeQueryDirection","MAWCurrentUser","MAWEncryptedBackupsRestoreMessageOverGraphQL","MAWJobDefinitions","QPLUserFlow","WABase64","WAHashStringToNumber","WAJids","WALogger","WAResultOrError","WorkerRelay","asyncToGeneratorRuntime","gkx","handleRestoreMessagesGraphQLResponse","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] graphQL range restore error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory params of client state are null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] No client state found - unable to restore"]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.direction,f=a.instanceKey,g=a.sortOrderMs;a=a.source;if(d("EBAPIWorkerCheck").runningInWorker())return d("WAResultOrError").makeError("unsupported-context");f=f!=null?d("WAHashStringToNumber").hashStringToNumber(f):void 0;var m=c("qpl")._(521471755,"2586");try{c("QPLUserFlow").start(m,{annotations:{bool:{mainThreadRestore:!0,workerThreadRestore:!1}},instanceKey:f});var n=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton),o=(yield d("handleRestoreMessagesGraphQLResponse").getClientState(n));if(o==null){d("WALogger").ERROR(l());c("QPLUserFlow").endFailure(m,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.NO_CLIENT_STATE,{instanceKey:f});return d("WAResultOrError").makeError("no-client-state")}var p=o.device_id,q=o.locally_available_epochs,r=o.mailboxRootKey;o=o.ocmfClientStateBlob;if(p==null||r==null||o==null){d("WALogger").ERROR(k());c("QPLUserFlow").endFailure(m,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.INVALID_CLIENT_STATE,{instanceKey:f});return d("WAResultOrError").makeError("invalid-client-state")}var s=d("MAWCurrentUser").getAppID();b=d("WAJids").threadIdForChatJid(b);e=e==="before"?c("LSEncryptedBackupsMessagesRangeQueryDirection").BEFORE:c("LSEncryptedBackupsMessagesRangeQueryDirection").AFTER;q={restore_context:{act_thread_id:d("MAWJobDefinitions").toThreadJidPrimaryId(b),site:"www",tam_thread_subtype:0},success:{device_context:{device_id:(i||(i=d("I64"))).to_float(p),locally_available_epochs:q,raw_tokens:{mailbox_root_key:d("WABase64").encodeB64(r),ocmf_client_state_blob:d("WABase64").encodeB64(o)}},direction:e,include_offset:c("gkx")("5340"),server_thread_key:b}};g!=null&&(q=babelHelpers["extends"]({},q,{reference_timestamp:g}));c("QPLUserFlow").addPoint(m,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.GRAPHQL_QUERY_START,{instanceKey:f});o=(yield d("WorkerRelay").createWorkerQuery(d("MAWEncryptedBackupsRestoreMessageOverGraphQL").query,{app_id:String((r=s)!=null?r:"0"),restore_payload_string:JSON.stringify(q),restore_type:"RANGE_QUERY_RESTORE"}));e=(yield d("EBAPISharedUtils").constructEBRestoreResponse(o,!1,m,n,f,p,b,a,void 0,g));if(e.success)return d("WAResultOrError").makeResult(e.response);else return d("WAResultOrError").makeError(e.response)}catch(a){d("WALogger").ERROR(j(),a);c("QPLUserFlow").endFailure(m,d("EBAPIQPLPoints").EBMessageRestoreQueryQPLPoints.RUNTIME_ERROR,{error:a,instanceKey:f});return d("WAResultOrError").makeError("runtime-error",a)}});return m.apply(this,arguments)}g.messageRangeQuery=a}),98);
__d("IGDLegacyTLCBundleResource",["IGDLegacyTLCMainWebWorkerResource"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("IGDLegacyTLCMainWebWorkerResource")}),98);/*FB_PKG_DELIM*/
__d("LSVoprfComputeSharedSecret.nop",["LSVoprfLoggingUtils","Promise","XPlatReactVoprf","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(25312440,"206");a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){a=d("LSVoprfLoggingUtils").getAcsQplEventLogger(i);a.start();c=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());var g=c.instanceCreationTimestampNs;c=c.voprfInstance;var j=c.voprfInfo,k=c.voprfWasm;a.addVoprfLoadedPoint(g);try{g=k.clientFinalize(j,new Uint8Array(e),new Uint8Array(f));a.endSuccess({wasmMemorySize:(j=k.wasmMemory)==null?void 0:j.buffer.byteLength});return(h||(h=b("Promise"))).resolve([g.finalEvaluation.buffer])}catch(b){a.endFailure({error:b,wasmMemorySize:(e=k.wasmMemory)==null?void 0:e.buffer.byteLength});throw b}finally{d("XPlatReactVoprf").freeVoprfInstance(c)}});function c(b,c,d,e){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSVoprfUnblind.nop",["LSVoprfLoggingUtils","Promise","XPlatReactVoprf","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(25299816,"2544");a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f,g,j,k,l){a=d("LSVoprfLoggingUtils").getAcsQplEventLogger(i);a.start();c=(yield d("XPlatReactVoprf").loadXPlatReactVoprf());var m=c.instanceCreationTimestampNs;c=c.voprfInstance;var n=c.voprfInfo,o=c.voprfWasm;a.addVoprfLoadedPoint(m);try{m=o.verifiableUnblind(n,new Uint8Array(k),new Uint8Array(l),new Uint8Array(f),new Uint8Array(j),new Uint8Array(g),new Uint8Array(e),!0);a.endSuccess({wasmMemorySize:(n=o.wasmMemory)==null?void 0:n.buffer.byteLength});return(h||(h=b("Promise"))).resolve([m.unblindedElement.buffer])}catch(b){a.endFailure({error:b,wasmMemorySize:(k=o.wasmMemory)==null?void 0:k.buffer.byteLength});throw b}finally{d("XPlatReactVoprf").freeVoprfInstance(c)}});function c(b,c,d,e,f,g,h,i){return a.apply(this,arguments)}return c}();g["default"]=a}),98);
__d("LSVerifyAndSaveNewCredentials",["LSArrayGetObjectAt","LSBase64Decode.nop","LSRemoveBlindedTokens","LSVoprfComputeSharedSecret.nop","LSVoprfUnblind.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(307).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?function(a){c.logger(a).mustfix(a)}("No valid config found when saving signed credentials"):(f=e.item,c.sequence([function(e){return d[1]=c.i64.of_int32(a[1].length),c.i64.gt(d[1],c.i64.cast([0,0]))?c.loopAsync(d[1],function(e){return d[2]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[2]).then(function(a){return a=a,d[3]=a[0],d[4]=a[1],a})},function(a){return d[5]=d[3].get("token_id"),d[3],c.db.table(308).fetch([[[d[5]]]]).next().then(function(b,e){var a=b.done;b=b.value;return a?(a=[c.blob(""),c.blob(""),c.blob("")],d[6]=a[0],d[7]=a[1],d[8]=a[2],a):(e=b.item,a=[e.nonce,e.blindedNonce,e.blindingFactor],d[6]=a[0],d[7]=a[1],d[8]=a[2],a)})},function(a){return c.forEach(c.db.table(308).fetch([[[d[5]]]]),function(a){return a["delete"]()})},function(a){return d[10]=d[3].get("signed_nonce"),d[3],c.nativeOperation(b("LSBase64Decode.nop"),d[10]).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[12]=d[3].get("proof_c"),d[3],c.nativeOperation(b("LSBase64Decode.nop"),d[12]).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[14]=d[3].get("proof_s"),d[3],c.nativeOperation(b("LSBase64Decode.nop"),d[14]).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.nativeOperation(b("LSVoprfUnblind.nop"),f.publicKey,d[8],d[7],d[11]==null?c.blob(""):d[11],d[13]==null?c.blob(""):d[13],d[15]==null?c.blob(""):d[15]).then(function(a){return a=a,d[16]=a[0],a})},function(e){return c.blobs.neq(d[16],void 0)?c.sequence([function(a){return c.nativeOperation(b("LSVoprfComputeSharedSecret.nop"),d[6],d[16]).then(function(a){return a=a,d[17]=a[0],a})},function(b){return c.blobs.neq(d[17],void 0)?c.db.table(309).add({tokenId:d[5],configId:a[0],nonce:d[6],redeemLimit:f.redemptionLimit,sharedSecret:d[17]}):c.resolve()}]):c.resolve()}])}):c.resolve()},function(d){return c.storedProcedure(b("LSRemoveBlindedTokens"),a[0])}]))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsVerifyAndSaveNewCredentialsStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSSetMessageTextHasLinks",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(a){var b=a.update;a.item;return b({textHasLinks:!0})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetMessageTextHasLinksStoredProcedure";e.exports=a}),null);
__d("LSStoryContactSyncFromBucket",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.filter(b.db.table(7).fetch(),function(a){return!0}),function(a){var b=a.update;a.item;return b({profileRingColor:void 0,profileRingState:void 0})})},function(a){return b.forEach(b.filter(b.db.table(53).fetch(),function(a){return b.i64.eq(a.bucketType,b.i64.cast([0,1]))}),function(a){var d=a.item;return c[1]=d.readState,b.i64.eq(c[1],b.i64.cast([0,1]))?c[0]=b.i64.cast([0,39423]):(b.i64.eq(c[1],b.i64.cast([0,2]))?c[2]=b.i64.cast([0,14342874]):c[2]=void 0,c[0]=c[2]),b.forEach(b.filter(b.db.table(7).fetch([[[d.ownerId]]]),function(a){return b.i64.eq(a.id,d.ownerId)&&b.i64.eq(b.i64.cast([0,1]),b.i64.cast([0,1]))}),function(a){var b=a.update;a.item;return b({profileRingState:c[1],profileRingColor:c[0]})})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSStoriesStoryContactSyncFromBucketStoredProcedure";e.exports=a}),null);
__d("LSUpdateCommunityThreadStaleState",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(9).fetch([[[a[0]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&([b.i64.cast([0,23]),b.i64.cast([0,21]),b.i64.cast([0,18]),b.i64.cast([0,26])].some(function(a){return b.i64.eq(c.threadType,a)})||b.i64.eq(c.threadType,b.i64.cast([0,152])))}).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.db.table(294).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?b.db.table(294).add({threadKey:a[0],threadQueueSequenceId:b.i64.cast([0,0]),isStale:a[1]}):(c.item,b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({isStale:a[1]})}))}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateCommunityThreadStaleStateStoredProcedure";e.exports=a}),null);
__d("LSUpdateThreadNullState",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadPictureUrl:a[1],threadPictureUrlFallback:a[2],threadPictureUrlExpirationTimestampMs:a[3],nullstateDescriptionText1:a[5],nullstateDescriptionType1:a[10],nullstateDescriptionText2:a[6],nullstateDescriptionType2:a[11],nullstateDescriptionText3:a[7],nullstateDescriptionType3:a[12],capabilities:a[15],threadName:a[16],threadSubtype:a[4]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateThreadNullStateStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSUpdateEventStartAndEndTime",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({eventStartTimestampMs:a[1],eventEndTimestampMs:a[2]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateEventStartAndEndTimeStoredProcedure";e.exports=a}),null);
__d("LSClearEventStartAndEndTime",["LSUpdateEventStartAndEndTime"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.islc(c.db.table(201).fetch([[[a[0]]]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=void 0:(b=a.item,d[0]=b.threadId)})},function(a){return c.i64.neq(d[0],void 0)?c.storedProcedure(b("LSUpdateEventStartAndEndTime"),d[0],void 0,void 0):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxClearEventStartAndEndTimeStoredProcedure";e.exports=a}),null);
__d("LSClearAllCmEventStartAndEndTimes",["LSClearEventStartAndEndTime"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.forEach(c.db.table(201).fetch(),function(a){a=a.item;return c.storedProcedure(b("LSClearEventStartAndEndTime"),a.eventId)})},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxClearAllCmEventStartAndEndTimesStoredProcedure";e.exports=a}),null);
__d("LSDeleteAllCmFbEventData",["LSArrayGetObjectAt","LSClearAllCmEventStartAndEndTimes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return c.storedProcedure(b("LSClearAllCmEventStartAndEndTimes"))},function(a){return d[0]=c.createArray(),c.forEach(c.db.table(201).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.forEach(c.db.table(202).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.forEach(c.db.table(238).fetch(),function(a){a=a.item;return d[2]=(d[0].push(a.eventId),d[0])})},function(a){return c.sequence([function(a){return d[2]=c.createArray(),d[3]=c.i64.of_int32(d[0].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(a){return d[5]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[0],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(a){return d[8]=(d[2].push(c.i64.to_string(d[6])),d[2])}])}):c.resolve()},function(a){return d[4]=d[2].join(","),d[1]=d[4]}])},function(a){return c.forEach(c.filter(c.db.table(200).fetch(),function(a){return d[0].some(function(b){return c.i64.eq(a.eventId,b)})}),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(202).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(201).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(238).fetch(),function(a){return a["delete"]()})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteAllCmFbEventDataStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("XAdsCMAccountSettingsPageControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/account/settings/",Object.freeze({tab:"information",highlight_tax_id:!1}),new Set(["highlight_tax_id"]));b=a;g["default"]=b}),98);
__d("XAdsCMControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/ads/manager/{?page}/{?tab}/",Object.freeze({help_tray:!1,no_redirect:!1,pixel_conversion_dialog:!1,show_edit_modal:!1,is_split_test:!1,m2w:!1,ads_manager_read_regions:!1}),void 0);b=a;g["default"]=b}),98);
__d("XAdsPEControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/adsmanager/",Object.freeze({_fb_noscript:!1,breakdown_regrouping:!1,is_reload_from_account_change:!1,is_split_test:!1,launch_quick_creation:!1,show_view_history:!1,show_inbox_re_tos:!1,from_ads_ai:!1,ads_manager_read_regions:!1}),void 0);b=a;g["default"]=b}),98);
__d("AdsManagerConstURIUtils",["AdsManagerReadRegions","XAdsCMAccountSettingsPageControllerRouteBuilder","XAdsCMControllerRouteBuilder","XAdsPEControllerRouteBuilder","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){b=c("XAdsPEControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:(d=b)!=null?d:void 0,nav_source:a}));h(b.toString())&&b.addQueryParam("ads_manager_read_regions","true");return b}function b(a,b,d){b=c("XAdsCMControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:(d=b)!=null?d:void 0,nav_source:a}));h(b.toString())&&b.addQueryParam("ads_manager_read_regions","true");return b}function d(a,b,d){return c("XAdsCMAccountSettingsPageControllerRouteBuilder").buildUri(babelHelpers["extends"]({},d,{nav_entry_point:(d=b)!=null?d:void 0,nav_source:a}))}function h(a){return a.includes("adsmanager")&&!c("AdsManagerReadRegions").excluded_endpoints.some(function(b){return a.includes(b)})&&c("gkx")("1221")?!0:!1}g.getAdsManagerURI=a;g.getXAdsCMControllerURI=b;g.getXAdsCMAccountSettingsPageURI=d;g.shouldRedirectToAMReadRegions=h}),98);/*FB_PKG_DELIM*/
__d("EBAPIWorkerCheck",[],(function(a,b,c,d,e,f){"use strict";function a(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(a){return!1}}f.runningInWorker=a}),66);
__d("MAWChatJid",["FBLogger","I64","Promise","ReQL","WAJids","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){a=d("WAJids").threadIdForChatJid(a);return(i||(i=d("I64"))).of_string(a)}function k(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(j(e))).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid chatJid: "+e);return(h||(h=b("Promise"))).reject(a)}}function a(a,b,d){return k(a,b).then(function(a){if(a!=null)return a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[toThreadKey] No mapping record for chatJid, source: %s",d)})}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield k(a,b));return b==null?void 0:d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b))});return l.apply(this,arguments)}function f(a,e){try{return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(e)).then(function(a){return a==null?void 0:a.serverThreadKey})}catch(a){c("FBLogger")("messenger_e2ee_web").catching(a).warn("Invalid integer jid: "+(i||(i=d("I64"))).to_string(e));return(h||(h=b("Promise"))).reject(a)}}g.toIntegerJid=j;g.toThreadKeyMaybe=k;g.toThreadKey=a;g.toThreadMaybe=e;g.toThreadKeyMaybeForChatJidInteger=f}),98);
__d("MWEBODSCategory",[],(function(a,b,c,d,e,f){"use strict";a=7319;f["default"]=a}),66);/*FB_PKG_DELIM*/
__d("LSClearThreadLimits",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(287).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsClearThreadLimitsStoredProcedure";e.exports=a}),null);
__d("LSDeleteAllDeliverySettingWarnings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSOmnistoreSettingsDeleteAllDeliverySettingWarningsStoredProcedure";e.exports=a}),null);
__d("LSEncryptedBackupsStatusTriggerUpsert",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.filter(b.db.table(195).fetch(),function(a){return!0}),function(a){return a["delete"]()})},function(a){return b.db.table(195).add({pk:void 0})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsEncryptedBackupsStatusTriggerUpsertStoredProcedure";e.exports=a}),null);
__d("LSEpdCookieSettingsUpsert",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(163).put({fbTrackersOnOtherCompanies:a[0],otherCompanyTrackersOnFoa:a[1]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSOmnistoreSettingsEpdCookieSettingsUpsertStoredProcedure";e.exports=a}),null);
__d("LSTruncateFeatureLimits",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(150).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateFeatureLimitsStoredProcedure";e.exports=a}),null);
__d("LSTruncateReachabilitySettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(148).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateReachabilitySettingsStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("MAWOfflineQueueStatus",["FBLogger","MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a,b){h.set(a,b),h.size>5e3&&c("FBLogger")("labyrinth_web").warn("Offline queue status map size (%s) is too large",h.size)}function k(a){return h.get(a)}function a(){h=new Map(),i=!1}function b(){return i}function e(){i=!0}function f(a,b){a=Object.keys(a);a.map(function(a){j(a,b)})}function l(a){return k(a)===d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}function m(){return Array.from(h.entries()).filter(function(a){a[0];a=a[1];return a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete&&a!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Failed}).map(function(a){a=a[0];return a})}g.setOfflineQueueStatus=j;g.getOfflineQueueStatus=k;g.resetOfflineQueueState=a;g.isOfflineQueueComplete=b;g.markOfflineQueueComplete=e;g.markThreadWithOfflineQueueStatus=f;g.isOfflineQueueDoneForThread=l;g.getAllThreadsWithOfflineQueueIncomplete=m}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);/*FB_PKG_DELIM*/
__d("LSClearAllPublicChatEventStartAndEndTimes",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxClearAllPublicChatEventStartAndEndTimesStoredProcedure";e.exports=a}),null);
__d("LSClearAllScreenTimeRecords",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(321).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSFamilyCenterSupervisionClearAllScreenTimeRecordsStoredProcedure";e.exports=a}),null);
__d("LSClearAllSupervisionEdgeRecords",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(319).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSFamilyCenterSupervisionClearAllSupervisionEdgeRecordsStoredProcedure";e.exports=a}),null);
__d("LSClearAllSupervisionMetadataRecords",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(320).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSFamilyCenterSupervisionClearAllSupervisionMetadataRecordsStoredProcedure";e.exports=a}),null);
__d("LSDeleteAllPublicChatFbEventData",["LSClearAllPublicChatEventStartAndEndTimes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(a){return c.storedProcedure(b("LSClearAllPublicChatEventStartAndEndTimes"))},function(a){return c.resolve(d)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteAllPublicChatFbEventDataStoredProcedure";e.exports=a}),null);
__d("LSDeleteThenInsertMessagingPrivacySettings",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(288).put({userId:a[0],readReceiptsDisabled:a[1],e2eeXmaPreviewsDisabled:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsDeleteThenInsertMessagingPrivacySettingsStoredProcedure";e.exports=a}),null);
__d("LSTruncateQuietTime",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.forEach(b.db.table(317).fetch(),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsTruncateQuietTimeStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSDeleteThenInsertIGContactInfo",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(176).put({contactId:a[0],igId:a[1],igFollowStatus:a[4],verificationStatus:a[5],linkedFbid:a[2],e2eeEligibility:a[6],supportsE2eeSpamdStorage:a[7]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSContactDeleteThenInsertIGContactInfoStoredProcedure";e.exports=a}),null);
__d("LSUpdateIGE2EEEligibilityValue",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(176).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({e2eeEligibility:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSContactUpdateIGE2EEEligibilityValueStoredProcedure";e.exports=a}),null);
__d("LSUpdateOrInsertOhaiGatewayKeyConfigs",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(313).put({keyId:a[0],publicKey:a[1],kemId:a[2],kdfId:a[3],aeadId:a[4],expirationDate:a[5],lastUpdatedTime:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOhaiUpdateOrInsertOhaiGatewayKeyConfigsStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSUpdateOrInsertCommunitySurfaceRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(253).put({surfaceType:a[0],communityKey:a[1],isLoadingAfter:!1,hasMoreAfter:a[2],nextPageCursor:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOrInsertCommunitySurfaceRangeStoredProcedure";e.exports=a}),null);/*FB_PKG_DELIM*/
__d("CAAFetaSavePasswordInterstitial.entrypoint",["CAAFetaSavePasswordInterstitialQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{query:{parameters:c("CAAFetaSavePasswordInterstitialQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("CAAFetaSavePasswordInterstitialDialog.react").__setRef("CAAFetaSavePasswordInterstitial.entrypoint")};g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("uniqueArray",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a}function a(a,b){var c=(b=b)!=null?b:g,d=[],e=new Set();a.forEach(function(a){var b=c(a);if(e.has(b))return;e.add(b);d.push(a)});return d}f["default"]=a}),66);